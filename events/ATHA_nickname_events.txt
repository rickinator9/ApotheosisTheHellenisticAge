namespace = ATHA_nickname

# Assign an epithet to a ruler that can have an epithet when they succeed to an independent throne.
ATHA_nickname.0001 = {
	type = character_event
	title = ATHA_nickname.0001.t
	desc = ATHA_nickname.0001.desc
	theme = crown
	left_portrait = root

	trigger = {
		can_get_epithet_trigger = yes
		NOT = { has_character_flag = prompted_to_choose_epithet } # Prevent getting the event multiple times when inheriting a lot of titles.
	}

	immediate = {
		save_epithet_suggestion_effect = { OPTION = option1 }
		save_epithet_suggestion_effect = { OPTION = option2 }
		save_epithet_suggestion_effect = { OPTION = option3 }

		add_character_flag = prompted_to_choose_epithet

		# Councillor used in localisation.
		random_councillor = {
			save_scope_as = councillor
		}
	}

	option = {
		name = ATHA_nickname.0001.opt_the_asian
		trigger = {
			OR = {
				scope:option1 = flag:the_asian
				scope:option2 = flag:the_asian
				scope:option3 = flag:the_asian
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = greedy
			}
			modifier = {
				factor = 1.2
				has_trait = gregarious # Willing to show their acculturisation to others.
			}
			modifier = {
				factor = 1.2
				OR = {
					has_trait = education_diplomacy
					has_trait = education_learning
				}
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					has_nickname = epithet_the_asian
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_asian }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_autocrat
		trigger = {
			OR = {
				scope:option1 = flag:the_autocrat
				scope:option2 = flag:the_autocrat
				scope:option3 = flag:the_autocrat
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.3
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.05
				has_trait = greedy
			}
			modifier = {
				factor = 1.2
				has_trait = education_stewardship
			}
			modifier = {
				factor = 1.1
				has_trait = august
			}
			modifier = {
				factor = 1.1
				has_trait = overseer
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_autocrat
						has_nickname = nick_the_autocrat
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_autocrat }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_victorious
		trigger = {
			OR = {
				scope:option1 = flag:the_victorious
				scope:option2 = flag:the_victorious
				scope:option3 = flag:the_victorious
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.05
				has_trait = wrathful
			}
			modifier = {
				factor = 1.05
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.1
				has_trait = strategist
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_victorious
						has_nickname = nick_the_victorious
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_victorious }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_beautifully_triumphant
		trigger = {
			OR = {
				scope:option1 = flag:the_beautifully_triumphant
				scope:option2 = flag:the_beautifully_triumphant
				scope:option3 = flag:the_beautifully_triumphant
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.05
				has_trait = wrathful
			}
			modifier = {
				factor = 1.05
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.1
				has_trait = august
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_beautifully_triumphant
						has_nickname = nick_the_beautifully_triumphant
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_beautifully_triumphant }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_benefactor
		trigger = {
			OR = {
				scope:option1 = flag:the_benefactor
				scope:option2 = flag:the_benefactor
				scope:option3 = flag:the_benefactor
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.2
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.05
				has_trait = overseer
			}
			modifier = {
				factor = 1.05
				has_trait = administrator
			}
			modifier = {
				factor = 1.1
				has_trait = architect
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_benefactor
						has_nickname = nick_the_benefactor
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_benefactor }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_divine
		trigger = {
			OR = {
				scope:option1 = flag:the_divine
				scope:option2 = flag:the_divine
				scope:option3 = flag:the_divine
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
			}
			modifier = {
				factor = 1.2
				has_trait = education_learning
			}
			modifier = { # Religions that do not allow people to be deified should not choose this as a title, unless ROOT is insane of course!
				factor = 0
				NOR = {
					has_trait = lunatic_1
					has_trait = lunatic_genetic
					faith = faith:alexandrian_faith # TODO: Tie this to a tenet once we have a Apotheosis tenet.
					faith = faith:soterism_faith
				}
			}
			modifier = {
				factor = 1.5
				num_virtuous_traits >= 3
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_divine
						has_nickname = nick_the_divine
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_divine }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_divine_manifest
		trigger = {
			OR = {
				scope:option1 = flag:the_divine_manifest
				scope:option2 = flag:the_divine_manifest
				scope:option3 = flag:the_divine_manifest
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
			}
			modifier = {
				factor = 1.2
				has_trait = education_learning
			}
			modifier = { # Religions that do not allow people to be deified should not choose this as a title, unless ROOT is insane of course!
				factor = 0
				NOR = {
					has_trait = lunatic_1
					has_trait = lunatic_genetic
					faith = faith:alexandrian_faith # TODO: Tie this to a tenet once we have a Apotheosis tenet.
					faith = faith:soterism_faith
				}
			}
			modifier = {
				factor = 1.5
				num_virtuous_traits >= 3
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					has_nickname = epithet_the_divine_manifest
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_divine_manifest }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_father_loving
		trigger = {
			OR = {
				scope:option1 = flag:the_father_loving
				scope:option2 = flag:the_father_loving
				scope:option3 = flag:the_father_loving
			}
		}
		ai_chance = {
			base = 10

			modifier = { # These familial nicknames were very common in the Greek world.
				factor = 1.5
				uses_greek_for_nickname_localization_trigger = yes
			}
			modifier = { # The character had exceedingly positive relations with their father.
				factor = 1.5
				OR = {
					has_relation_friend = father
					has_relation_best_friend = father
					has_relation_lover = father
					has_relation_soulmate = father
				}
			}
			modifier = { # Will never assume this epithet if this character had exceedingly bad relations with their father or if they are deceitful.
				factor = 0
				NOT = { has_trait = deceitful }
				OR = {
					has_relation_rival = father
					has_relation_nemesis = father
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious # More likely to establish family ties.
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.2
				has_trait = family_first
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_father_loving
						has_nickname = nick_the_father_loving
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_father_loving }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_generous
		trigger = {
			OR = {
				scope:option1 = flag:the_generous
				scope:option2 = flag:the_generous
				scope:option3 = flag:the_generous 
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = generous
			}
			modifier = {
				factor = 1.2
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_generous
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_generous }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_just
		trigger = {
			OR = {
				scope:option1 = flag:the_just
				scope:option2 = flag:the_just
				scope:option3 = flag:the_just
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.2
				has_trait = diligent
			}
			modifier = {
				factor = 1.05
				has_trait = generous
			}
			modifier = {
				factor = 1.05
				has_trait = gregarious
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = just
			}
			modifier = {
				factor = 1.2
				has_trait = education_stewardship
			}
			modifier = {
				factor = 1.05
				has_trait = administrator
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_just
						has_nickname = nick_the_just
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_just }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_mother_loving
		trigger = {
			OR = {
				scope:option1 = flag:the_mother_loving
				scope:option2 = flag:the_mother_loving
				scope:option3 = flag:the_mother_loving
			}
		}
		ai_chance = {
			base = 10

			modifier = { # These familial nicknames were very common in the Greek world.
				factor = 1.5
				uses_greek_for_nickname_localization_trigger = yes
			}
			modifier = { # The character had exceedingly positive relations with their mother.
				factor = 1.5
				OR = {
					has_relation_friend = mother
					has_relation_best_friend = mother
					has_relation_lover = mother
					has_relation_soulmate = mother
				}
			}
			modifier = { # Will never assume this epithet if this character had exceedingly bad relations with their mother or if they are deceitful.
				factor = 0
				NOT = { has_trait = deceitful }
				OR = {
					has_relation_rival = mother
					has_relation_nemesis = mother
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious # More likely to establish family ties.
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.2
				has_trait = family_first
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_mother_loving
						has_nickname = nick_the_mother_loving
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_mother_loving }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_pious
		trigger = {
			OR = {
				scope:option1 = flag:the_pious
				scope:option2 = flag:the_pious
				scope:option3 = flag:the_pious
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = zealous
			}
			modifier = {
				factor = 1.2
				has_trait = education_learning
			}
			modifier = {
				factor = 1.2
				has_trait = theologian
			}
			modifier = {
				factor = 1.25
				num_virtuous_traits >= 1
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_pious
						has_nickname = nick_the_pious
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_pious }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_saviour
		trigger = {
			OR = {
				scope:option1 = flag:the_saviour
				scope:option2 = flag:the_saviour
				scope:option3 = flag:the_saviour
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.2
				has_trait = wrathful # Sort of a slight xenophobic behavior.
			}
			modifier = {
				factor = 1.1
				has_trait = arrogant # Arrogant people likely hate barbarians.
			}
			modifier = {
				factor = 1.1
				has_trait = zealous # Those barbs probably have a different faith, otherwise they wouldn't be barbs.
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.05
				has_trait = theologian
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_saviour
						has_nickname = nick_the_saviour
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_saviour }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_sibling_loving
		trigger = {
			OR = {
				scope:option1 = flag:the_sibling_loving
				scope:option2 = flag:the_sibling_loving
				scope:option3 = flag:the_sibling_loving
			}
		}
		ai_chance = {
			base = 10

			modifier = { # These familial nicknames were very common in the Greek world.
				factor = 1.5
				uses_greek_for_nickname_localization_trigger = yes
			}
			modifier = { # The character had exceedingly positive relations with one of their siblings.
				factor = 1.5
				any_sibling = {
					OR = {
						has_relation_friend = root
						has_relation_best_friend = root
						has_relation_lover = root
						has_relation_soulmate = root
					}
				}
			}
			modifier = { # Will never assume this epithet if this character had exceedingly bad relations with one of their siblings or if they are deceitful.
				factor = 0
				NOT = { has_trait = deceitful }
				any_sibling = {
					OR = {
						has_relation_rival = root
						has_relation_nemesis = root
					}
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious # More likely to establish family ties.
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.2
				has_trait = family_first
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_sibling_loving
						has_nickname = nick_the_sibling_loving
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_sibling_loving }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_victor
		trigger = {
			OR = {
				scope:option1 = flag:the_victor
				scope:option2 = flag:the_victor
				scope:option3 = flag:the_victor
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.05
				has_trait = wrathful
			}
			modifier = {
				factor = 1.05
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.1
				has_trait = strategist
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_victor
						has_nickname = nick_the_victor
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_victor }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_wealthy
		trigger = {
			OR = {
				scope:option1 = flag:the_wealthy
				scope:option2 = flag:the_wealthy
				scope:option3 = flag:the_wealthy
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = greedy
			}
			modifier = {
				factor = 1.2
				has_trait = education_stewardship
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_wealthy
						has_nickname = nick_the_wealthy
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_wealthy }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_well_born
		trigger = {
			OR = {
				scope:option1 = flag:the_well_born
				scope:option2 = flag:the_well_born
				scope:option3 = flag:the_well_born
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.2
				has_trait = education_intrigue
			}
			modifier = { # If they have good genetic traits and are arrogant, they will certainly want to showcase this to the world.
				factor = 1.5
				has_trait = arrogant
				num_of_good_genetic_traits > 0
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_well_born
						has_nickname = nick_the_well_born
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_well_born }
	}

	option = {
		name = ATHA_nickname.0001.opt_no_epithet
		ai_chance = {
			base = 0 # AI should never pick this unless any of the traits are applicable.

			modifier = {
				add = 10
				has_trait = content # Doesn't care about an epithet.
			}
			modifier = {
				add = 5
				has_trait = fickle # Can't choose between the others.
			}
			modifier = {
				add = 5
				has_trait = humble # May see an epithet as unnecessary.
			}
			modifier = { # They hate themselves, so do they really deserve an epithet?
				add = 5
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
			modifier = {
				add = 10
				has_trait = bastard_founder
			}
		}
		add_character_flag = refused_epithet
	}
}

#### NICKNAMES ####

scripted_effect select_nickname_county_effect = {
	random_held_title = { # Used in localization.
		limit = { tier = tier_county }

		save_scope_as = nickname_county
	}
}

scripted_effect select_nickname_capital_effect = {
	capital_province = {
		county = {
			save_scope_as = nickname_county
		}
		barony = {
			save_scope_as = nickname_barony
		}
	}
}

scripted_effect select_nickname_councillor_effect = {
	random_councillor = { # Used in localization.
		save_scope_as = nickname_councillor
	}
}

scripted_effect select_nickname_knight_effect = {
	random_knight = {
		save_scope_as = nickname_knight
	}
}

scripted_effect select_nickname_ancestor_effect = {
	random_close_family_member = {
		even_if_dead = yes
		limit = {
			OR = {
				is_great_grandparent_of = root
				is_grandparent_of = root
			}
			OR = {
				AND = {
					is_female = yes
					root = { is_female = yes }
				}
				AND = {
					is_male = yes
					root = { is_male = yes }
				}
			}
			is_alive = no
		}
		alternative_limit = {
			OR = {
				is_great_grandparent_of = root
				is_grandparent_of = root
			}
			is_alive = no
		}
		alternative_limit = {
			is_parent_of = root
			OR = {
				AND = {
					is_female = yes
					root = { is_female = yes }
				}
				AND = {
					is_male = yes
					root = { is_male = yes }
				}
			}
			is_alive = no
		}
		alternative_limit = {
			is_parent_of = root
			is_alive = no
		}
		alternative_limit = {
			OR = {
				AND = {
					is_female = yes
					root = { is_female = yes }
				}
				AND = {
					is_male = yes
					root = { is_male = yes }
				}
			}
			is_alive = no
		}
		alternative_limit = {
			is_alive = no
		}

		save_scope_as = nickname_ancestor
	}
}

scripted_effect select_nickname_physician_effect = {
	if = {
		limit = {
			any_relation = {
				type = court_physician
				count >= 1
			}
		}

		random_relation = {
			type = court_physician
			save_scope_as = nickname_physician
		}
	}
}

scripted_effect select_vassal_effect = {
	random_vassal = {
		limit = { # Select a vassal with a capital that is close.
			capital_province = {
				squared_distance = { target = root.capital_province value <= squared_distance_small } # Roughly the distance the size of Wales
			}
		}
		alternative_limit = { } # In crazy cases where the king does not have any vassals with capitals close by.

		save_scope_as = nickname_vassal
		capital_province = {
			barony = { save_scope_as = nickname_vassal_barony }
		}
	}
}

scripted_effect select_independent_ruler_effect = {
	random_independent_ruler = {
		limit = {
			NOT = { this = ROOT }
			NOR = {
				has_government = republic_government
				has_government = theocracy_government
				has_government = mercenary_government
				has_government = holy_order_government
			}
		}

		save_scope_as = nickname_ruler_1
		capital_province = {
			barony = { save_scope_as = nickname_ruler_1_barony }
			county = { save_scope_as = nickname_ruler_1_county }
		}
	}
}

scripted_effect select_two_independent_rulers_effect = {
	random_independent_ruler = {
		limit = {
			NOT = { this = ROOT }
			NOR = {
				has_government = republic_government
				has_government = theocracy_government
				has_government = mercenary_government
				has_government = holy_order_government
			}
		}

		save_scope_as = nickname_ruler_1
		capital_province = {
			barony = { save_scope_as = nickname_ruler_1_barony }
			county = { save_scope_as = nickname_ruler_1_county }
		}
	}
	random_independent_ruler = {
		limit = {
			NOR = {
				this = ROOT
				this = scope:nickname_ruler_1
			}
			NOR = {
				has_government = mercenary_government
				has_government = holy_order_government
			}
		}

		save_scope_as = nickname_ruler_2
		capital_province = {
			barony = { save_scope_as = nickname_ruler_2_barony }
			county = { save_scope_as = nickname_ruler_2_county }
		}
	}
}

scripted_effect prevent_nickname_by_county_bribe_effect = {
	remove_short_term_gold = medium_gold_value
	scope:nickname_county = {
		add_county_modifier = {
			modifier = nickname_county_bribe_modifier
			years = 1
		}
	}

	change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_increase }
}

scripted_effect prevent_nickname_by_county_deceit_effect = {
	add_prestige = major_prestige_loss
	add_character_modifier = {
		modifier = nickname_deceiver_modifier
		years = 2
	}
}

scripted_effect prevent_nickname_by_county_punishment_effect = {
	scope:nickname_county = {
		change_development_progress_with_overflow = -20
		add_county_modifier = {
			modifier = nickname_county_punishment_modifier
			years = 5
		}
	}
	add_dread = minor_dread_gain
	add_piety = medium_piety_loss

	change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
}

scripted_effect prevent_nickname_by_county_imprison_effect = {
	scope:nickname_county = {
		add_county_modifier = {
			modifier = nickname_county_imprison_modifier
			years = 5
		}
	}
	add_dread = minor_dread_gain
	add_piety = minor_piety_loss

	change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
}

# nick_the_bastard
ATHA_nickname.0100 = {
	type = character_event
	title = ATHA_nickname.0100.t
	desc = ATHA_nickname.0100.desc
	theme = bastardy
	left_portrait = root

	trigger = {
		can_get_nick_the_bastard = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_county_effect = yes
	}

	weight_multiplier = {
		base = 1
		
		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_bastard }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0100.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so of course I am a bastard!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
			modifier = { # Unlikely to admit to their disputed heritage.
				factor = 0.75
				has_trait = disputed_heritage
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			disputed_heritage = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_bastard }
		add_prestige_level = -1
	}
	option = { # Bribe them to not use it anymore.
		name = ATHA_nickname.0100.b
		custom_tooltip = ATHA_nickname_bribery_suppression_tt
		ai_chance = {
			base = 12

			modifier = {
				factor = 0.5
				has_trait = greedy
			}
			modifier = { # People who aren't generous will still be reluctant to let their gold go.
				factor = 0.9
				NOR = {
					has_trait = generous
					has_trait = greedy
				}
			}
		}
		stress_impact = {
			greedy = medium_stress_impact_gain
		}

		prevent_nickname_by_county_bribe_effect = yes
	}
	option = { # Punish them!
		name = ATHA_nickname.0100.c
		custom_tooltip = ATHA_nickname_violent_suppression_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			vengeful = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			sadistic = medium_stress_impact_loss
			paranoid = minor_stress_impact_loss
		}

		prevent_nickname_by_county_punishment_effect = yes
	}
}

# nick_the_clubfooted
ATHA_nickname.0101 = {
	type = character_event
	title = ATHA_nickname.0101.t
	desc = ATHA_nickname.0101.desc
	theme = unfriendly
	left_portrait = root

	trigger = {
		can_get_nick_the_clubfooted = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_county_effect = yes
		select_nickname_councillor_effect = yes
	}

	weight_multiplier = {
		base = 1

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_clubfooted }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0101.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so it is fair for me to be known for my bad qualities!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_clubfooted }
		add_prestige = medium_prestige_loss

		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			depressed_1 = minor_stress_impact_loss
			depressed_genetic = minor_stress_impact_loss
		}
	}
	option = { # Spread lies.
		name = ATHA_nickname.0101.b
		custom_tooltip = ATHA_nickname_deceit_suppression_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = deceitful
				NOR = {
					has_trait = vengeful
					has_trait = sadistic
				}
			}
			modifier = { # Surely, they have to believe this!
				factor = 1.2
				has_trait = trusting
			}
			modifier = { # They make their own truths.
				factor = 1.1
				has_trait = arbitrary
			}
		}

		prevent_nickname_by_county_deceit_effect = yes
	}
	option = { # Punish them!
		name = ATHA_nickname.0101.c
		custom_tooltip = ATHA_nickname_violent_suppression_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			vengeful = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			sadistic = medium_stress_impact_loss
			paranoid = minor_stress_impact_loss
		}

		prevent_nickname_by_county_punishment_effect = yes
	}
}

# nick_the_dowry_bearer
# ATHA_nickname.0102 = {

# nick_the_eagle
# Triggered when winning a stackwipe victory through ATHA_nickname.0302.
ATHA_nickname.0103 = {
	type = character_event
	title = ATHA_nickname.0103.t
	desc = ATHA_nickname.0103.desc
	theme = battle
	left_portrait = root

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_knight_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0103.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = brave
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			arrogant = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_eagle }
		add_prestige = medium_prestige_gain
	}

	option = { # Reject the nickname.
		name = ATHA_nickname.0103.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.75
				has_trait = wrathful
			}
			modifier = {
				factor = 0.75
				has_trait = vengeful
			}
			modifier = {
				factor = 0.75
				has_trait = sadistic
			}
			modifier = {
				factor = 1.25
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = forgiving
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			wrathful = minor_stress_impact_loss
			vengeful = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
			compassionate = minor_stress_impact_loss
			forgiving = minor_stress_impact_loss
		}

		add_prestige = medium_prestige_loss
	}
}

# nick_the_fair
ATHA_nickname.0104 = {
	type = character_event
	title = ATHA_nickname.0104.t
	desc = ATHA_nickname.0104.desc
	theme = love
	override_background = {
		event_background = alley_day
	}
	left_portrait = root
	right_portrait = scope:nickname_vassal

	trigger = {
		can_get_nick_the_fair = yes

		# Additional requirements not included in the general trigger (to prevent the system from revoking the nickname):
		NOT = { has_trait = leper }
	}

	weight_multiplier = {
		base = 1

		modifier = { # This character is flawless in both face and body.
			factor = 10
			is_flawlessly_attractive_character_trigger = yes
		}
		modifier = { # This character has additional muscle tone on their already attractive body.
			factor = 2
			has_attractive_body_trigger = yes
			has_trait = strong
		}
		modifier = { # Missing an eye will make a character's face less attractive.
			factor = 0.75
			has_attractive_face_trigger = yes
			has_trait = one_eyed
		}
		modifier = { # Albinoism may be found unattractive by many.
			factor = 0.75
			has_trait = albino # Not specific to face only, as it may also create awkward situations of having a whiter skin among dark-skinned/tanned populations.
		}
		modifier = { # Obesity can make faces lose definition.
			factor = 0.5
			has_character_modifier = obese_modifier
		}
		modifier = { # The boils can be quite unsightly.
			factor = 0.5
			has_trait = lovers_pox
		}

		# Becomes less likely with age.
		modifier = {
			factor = 0.5
			age >= 40
		}
		modifier = {
			factor = 0.5
			age >= 50
		}
		modifier = {
			factor = 0.5
			age >= 60
		}

		# Additional modifiers based on sexual success. The weight starts decently high as sex can be had with just the wife.
		modifier = {
			factor = 1.25
			has_variable = nick_the_fair_weight
			var:nick_the_fair_weight >= 30
		}
		modifier = {
			factor = 1.25
			has_variable = nick_the_fair_weight
			var:nick_the_fair_weight >= 60
		}
		modifier = {
			factor = 2
			has_variable = nick_the_fair_weight
			var:nick_the_fair_weight >= 100
		}


		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_fair }
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_vassal_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0104.a
		ai_chance = {
			base = 10

			modifier = { # People who do not like intimacy may not appreciate being known as a catch worldwide.
				factor = 0.8
				has_trait = chaste
			}
			modifier = { # Lusty people, however...
				factor = 1.5
				OR = {
					has_trait = lustful
					has_trait = rakish
				}
			}
			modifier = { # Ambitious people will know that there are benefits to first impressions.
				factor = 1.1
				has_trait = ambitious
			}
			modifier = { # Shy people do not want much attention.
				factor = 0.75
				has_trait = shy
			}
			modifier = { # But may have to admit to the fact...
				factor = 1.25
				has_trait = honest
			}
			modifier = { # Humble people may not want to admit to their superior appearance.
				factor = 0.75
				has_trait = humble
			}
			modifier = { # Arrogant people will want to bask in it.
				factor = 3
				has_trait = arrogant
			}
			modifier = { # Paranoid people will know this could attract many who are envious.
				factor = 0.5
				has_trait = paranoid
			}
			modifier = { # A depressed person will never be able to believe it.
				factor = 0.5
				has_trait = depressed
			}
			modifier = { # A blind and depressed person will never be able to believe it.
				factor = 0.5
				has_trait = depressed
				has_trait = blind
			}
			modifier = { # Zealous people would like to be known for their religious efforts.
				factor = 0.75
				has_trait = zealous
			}
		}
		stress_impact = {
			lustful = medium_stress_impact_loss
			rakish = medium_stress_impact_loss
			shy = medium_stress_impact_gain
			honest = minor_stress_impact_loss
			humble = medium_stress_impact_gain
			arrogant = major_stress_impact_loss
			paranoid = medium_stress_impact_gain
			depressed_1 = medium_stress_impact_gain
			depressed_genetic = medium_stress_impact_gain
		}
	
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_fair }
		add_prestige = medium_prestige_gain
		dynasty = { add_dynasty_prestige = medium_dynasty_prestige_gain }
	}
	option = { # Direct the attention onto the vassal instead. The vassal may perceive this as an insult.
		name = ATHA_nickname.0104.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 2
				has_trait = humble
			}
			modifier = { # Content to operate in the shadow of others.
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = { # A gregarious character will use this opportunity to improve their opinion among others, but will be tactful enough to not insult them.
				factor = 1.25
				has_trait = gregarious
			}
			modifier = { # If they have the necessary social skills to recognise that this would insult the vassal, they will almost never say it. Unless the vassal is a rival of course!
				factor = 0.25
				scope:nickname_vassal = { has_trait = beauty_bad }
				OR = {
					has_trait = gregarious
					has_trait = education_diplomacy_2
					has_trait = education_diplomacy_3
					has_trait = education_diplomacy_4
				}
				NOR = {
					has_relation_rival = scope:nickname_vassal
					has_relation_nemesis = scope:nickname_vassal
				}
			}
		}

		if = {
			limit = {
				scope:nickname_vassal = { has_trait = beauty_bad }
			}
			custom_tooltip = ATHA_nickname_sarcastic_insult_tt

			scope:nickname_vassal = {
				add_opinion = {
					modifier = insulted_opinion
					target = root
					years = 2
				}
			}

			# If one is insulting a rival, they will derive pleasure from that.
			if = {
				limit = {
					OR = {
						has_relation_rival = scope:nickname_vassal
						has_relation_nemesis = scope:nickname_vassal
					}
				}

				add_stress = medium_stress_loss
			}

			change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		} else = {
			custom_tooltip = ATHA_nickname_humble_rejection_tt
			scope:nickname_vassal = {
				add_opinion = {
					modifier = compliment_opinion
					target = root
					opinion = 20
				}
			}
			add_character_modifier = {
				modifier = nickname_humble_modifier
				years = 5
			}

			change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
			change_nickname_weight_effect = { NICKNAME = nick_the_illustrious CHANGE = nickname_weight_small_increase }
			change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
		}

		stress_impact = {
			humble = major_stress_impact_loss
			content = minor_stress_impact_loss
		}
	}
	option = { # Allude to the fateful demise of any previous conquests.
		name = ATHA_nickname.0104.c
		trigger = { has_trait = sadistic }
		custom_tooltip = ATHA_nickname_unspeakable_acts_tt
		ai_chance = {
			base = 0

			modifier = { # Does not like any conflict at all.
				factor = 0.5
				has_trait = craven
			}
			modifier = {
				factor = 2
				OR = {
					has_trait = lunatic
					has_trait = possessed
				}
			}
			modifier = { # A Weepy-Voiced Killer?
				factor = 1.5
				has_trait = contrite
			}
		}
		stress_impact = {
			craven = major_stress_impact_gain
			sadistic = major_stress_impact_loss
			contrite = medium_stress_impact_loss
		}

		trait = sadistic

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_skeletons_in_closet_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_flayer CHANGE = nickname_weight_small_increase }
	}
	option = { # Loudly complain about the gathered crowd.
		name = ATHA_nickname.0104.d
		custom_tooltip = ATHA_nickname_inner_beauty_tt
		ai_chance = {
			base = 10

			modifier = { # Does not like any conflict at all.
				factor = 0.5
				has_trait = craven
			}
			modifier = { # Does not like to talk, especially to large crowds.
				factor = 0.5
				has_trait = shy
			}
			modifier = {
				factor = 1.1
				has_trait = wrathful
			}
			modifier = { # Arrogant people love basking in the attention.
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.8
				has_trait = calm
			}
			modifier = {
				factor = 0.75
				has_trait = compassionate
			}
			modifier = { # Less control over the self.
				factor = 1.2
				has_trait = drunkard
			}
			modifier = { # This is a Karen.
				factor = 2
				has_trait = irritable
			}
		}
		stress_impact = {
			shy = major_stress_impact_gain
			arrogant = major_stress_impact_gain
			compassionate = minor_stress_impact_gain
			irritable = major_stress_impact_loss
		}

		add_prestige = medium_prestige_loss
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_young - Initial event triggered by the death of the ruler.
ATHA_nickname.0105 = {
	hidden = yes

	trigger = {
		is_allowed_nickname_trigger = yes
		can_get_nick_the_young = yes
	}

	immediate = {
		save_scope_as = nick_the_young_receiver
		player_heir = {
			trigger_event = {
				id = ATHA_nickname.0106
				days = { 14 30 }
			}
		}
	}
}

# nick_the_young - Event for next heir.
ATHA_nickname.0106 = {
	type = character_event
	title = ATHA_nickname.0106.t
	desc = ATHA_nickname.0106.desc
	theme = skull
	left_portrait = root
	right_portrait = scope:nick_the_young_receiver

	immediate = {
		select_nickname_capital_effect = yes

		scope:nick_the_young_receiver = {
			set_permanent_nickname_effect = { NICKNAME = nick_the_young }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0106.a
	}
}

# nick_the_short_lived
ATHA_nickname.0107 = {
	type = character_event
	title = ATHA_nickname.0107.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = ATHA_nickname.0107.desc_self
				trigger = {
					this = scope:nick_the_short_lived_receiver
				}
			}
			desc = ATHA_nickname.0107.desc_other
		}
	}
	theme = crown
	left_portrait = scope:nick_the_short_lived_receiver
	right_portrait = scope:new_holder

	immediate = {
		show_as_tooltip = {
			scope:nick_the_short_lived_receiver = {
				set_nickname_with_cooldown_effect = { NICKNAME = nick_the_short_lived }
			}
		}
	}

	option = { # Accept the nickname (nickname gainer).
		name = ATHA_nickname.0107.a_self
		trigger = {
			this = scope:nick_the_short_lived_receiver
		}
	}
	option = { # Accept the nickname.
		name = ATHA_nickname.0107.a_other
		trigger = {
			NOT = { this = scope:nick_the_short_lived_receiver }
		}
	}
}

# nick_the_one_eyed
ATHA_nickname.0108 = {
	type = character_event
	title = ATHA_nickname.0108.t
	desc = ATHA_nickname.0108.desc
	theme = physical_health
	override_background = {
		trigger = {
			NOT = { has_character_flag = put_out_own_eye }
		}
		event_background = battlefield
	}
	left_portrait = root

	trigger = {
		can_get_nick_the_one_eyed = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_one_eyed }
		}
	}

	option = { # Accept the nickname (flagellant).
		name = ATHA_nickname.0108.a_flagellant
		trigger = {
			has_character_flag = put_out_own_eye
		}
		ai_chance = { # Proof of piety.
			base = 10

			modifier = {
				factor = 10
				has_trait = flagellant
			}
			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 2
				has_trait = zealous
			}
			modifier = {
				factor = 0.5
				has_trait = cynical
			}
		}
		stress_impact = {
			flagellant = massive_stress_impact_loss
			zealous = medium_stress_impact_loss
			cynical = medium_stress_impact_gain
		}
		trait = flagellant

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_one_eyed }
		add_piety = medium_piety_gain
	}
	option = { # Accept the nickname (non-flagellant).
		name = ATHA_nickname.0108.a
		trigger = {
			NOT = { has_character_flag = put_out_own_eye }
		}
		ai_chance = { # Proof of bravery in battle.
			base = 10

			modifier = {
				factor = 2
				OR = {
					has_trait = brave
					AND = { # The character may want to adopt the nickname if it speaks against their cowardice.
						has_trait = craven
						faith = { trait_is_sin = craven }
					}
				}
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_one_eyed }
	}
	option = { # I took things too far (flagellant)
		name = ATHA_nickname.0108.b_flagellant
		trigger = {
			has_character_flag = put_out_own_eye
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 0.8
				has_trait = humble
			}
			modifier = {
				factor = 0
				has_trait = flagellant
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
			}
		}
		stress_impact = {
			calm = medium_stress_impact_loss
			flagellant = major_stress_impact_gain
			zealous = medium_stress_impact_gain
			cynical = medium_stress_impact_loss
		}
		trait = flagellant

		if = {
			limit = { has_trait = flagellant }
			remove_trait = flagellant
		}

		add_character_modifier = {
			modifier = nickname_regrets_eye_flagellation_modifier
			years = 2
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_pious CHANGE = nickname_weight_small_decrease }
	}
	option = { # Threaten (non-flagellant)
		name = ATHA_nickname.0108.b
		trigger = {
			NOT = { has_character_flag = put_out_own_eye } 
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
			modifier = {
				factor = 1.1
				has_trait = education_intrigue
			}
		}
		stress_impact = {
			wrathful = minor_stress_impact_loss
			vengeful = medium_stress_impact_loss
			sadistic = medium_stress_impact_loss
			brave = medium_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_eye_gouging_threats_modifier
			years = 2
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
	option = { # Complain (both)
		name = ATHA_nickname.0108.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = { # May realize the effects on their chances with the opposite sex.
				factor = 1.2
				has_trait = lustful
			}
			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = forgiving
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.1
				has_trait = just
			}
		}
		if = {
			limit = { has_character_flag = put_out_own_eye }
			stress_impact = {
				arrogant = medium_stress_impact_loss
				flagellant = major_stress_impact_gain
				zealous = medium_stress_impact_gain
				cynical = medium_stress_impact_loss
			}
		} else = {
			stress_impact = {
				arrogant = medium_stress_impact_loss
				brave = medium_stress_impact_gain
			}
		}

		add_gold = minor_gold_loss
		add_prestige = minor_prestige_loss
		add_piety = minor_piety_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_great
ATHA_nickname.0109 = {
	type = character_event
	title = ATHA_nickname.0109.t
	desc = ATHA_nickname.0109.desc
	theme = realm
	left_portrait = root

	trigger = {
		can_get_nick_the_great = yes
	}

	immediate = {
		play_music_cue = "mx_cue_touching_moment" 
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0109.a
		stress_impact = {
			base = massive_stress_impact_loss
			humble = medium_stress_impact_gain
		}

		set_permanent_nickname_effect = { NICKNAME = nick_the_great }
		add_prestige = massive_prestige_gain
		add_dynasty_prestige = massive_dynasty_prestige_gain
	}
}

# nick_the_sacrificed
# Triggered from events.
ATHA_nickname.0110 = {
	type = character_event
	title = ATHA_nickname.0110.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					faith = { has_doctrine_parameter = human_sacrifice_active }
				}
				desc = ATHA_nickname.0110.desc_good
			}
			desc = ATHA_nickname.0110.desc_bad
		}
	}
	theme = death
	left_portrait = root

	immediate = {
		show_as_tooltip = {
			scope:nickname_the_sacrificed_receiver = { 
				set_permanent_nickname_effect = { NICKNAME = nick_the_sacrificed }
			}
		}
	}

	option = { # Accept the nickname.
		name = {
			trigger = {
				faith = { has_doctrine_parameter = human_sacrifice_active }
			}
			text = ATHA_nickname.0110.a_good
		}
		name = {
			trigger = {
				NOT = {
					faith = { has_doctrine_parameter = human_sacrifice_active }
				}
			}
			text = ATHA_nickname.0110.a_good
		}
	}
}

# nick_the_autocrat
ATHA_nickname.0111 = {
	type = character_event
	title = ATHA_nickname.0111.t
	desc = ATHA_nickname.0111.desc
	theme = crown
	left_portrait = root

	trigger = {
		can_get_nick_the_autocrat = yes
		NOT = { has_nickname = epithet_the_autocrat }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.25
			has_trait = ambitious
		}
		modifier = {
			factor = 1.1
			var:nick_the_autocrat_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_autocrat_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_autocrat_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_autocrat_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_autocrat_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_autocrat_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_autocrat }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0111.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = greedy
			}
			modifier = {
				factor = 0.75
				has_trait = humble
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
		}
		stress_impact = {
			ambitious = medium_stress_impact_loss
			humble = minor_stress_impact_gain
			arrogant = minor_stress_impact_loss
			compassionate = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_autocrat }
		add_prestige = minor_prestige_gain
	}
	option = { # Cruel response.
		name = ATHA_nickname.0111.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = wrathful
			}
			modifier = {
				factor = 0.5
				has_trait = calm
			}
			modifier = {
				factor = 1.1
				has_trait = vengeful
			}
			modifier = {
				factor = 1.25
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.25
				has_trait = paranoid
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			wrathful = medium_stress_impact_loss
			calm = medium_stress_impact_gain
			arbitrary = minor_stress_impact_loss
			paranoid = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
			just = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_air_of_dread_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
	}
	option = { # Restore some civil liberties
		name = ATHA_nickname.0111.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.25
				has_trait = just
			}
			modifier = {
				factor = 1.25
				has_trait = compassionate
			}
		}
		stress_impact = {
			content = medium_stress_impact_loss
			fickle = minor_stress_impact_loss
			just = minor_stress_impact_loss
			compassionate = minor_stress_impact_loss
			ambitious = medium_stress_impact_gain
			stubborn = minor_stress_impact_gain
		}

		if = {
			limit = { has_realm_law = crown_authority_1 }
			add_realm_law = crown_authority_0
		} else_if = {
			limit = { has_realm_law = crown_authority_2 }
			add_realm_law = crown_authority_1
		} else_if = {
			limit = { has_realm_law = crown_authority_3 }
			add_realm_law = crown_authority_2
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_restored_civil_liberties_modifier
			years = 10
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_autocrat CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_autocrat - Transition from epithet to nickname.
ATHA_nickname.0112 = {
	hidden = yes

	trigger = {
		can_get_nick_the_autocrat = yes
		has_nickname = epithet_the_autocrat
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_autocrat }
	}
}

# nick_the_benefactor
ATHA_nickname.0113 = {
	type = character_event
	title = ATHA_nickname.0113.t
	desc = ATHA_nickname.0113.desc
	theme = stewardship_wealth_focus
	left_portrait = root

	trigger = {
		can_get_nick_the_benefactor = yes
		NOT = { has_nickname = epithet_the_benefactor }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = generous
		}
		modifier = {
			factor = 1.1
			var:nick_the_benefactor_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_benefactor_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_benefactor_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_benefactor_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_benefactor_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_benefactor_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_benefactor }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0113.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.25
				has_trait = generous
			}
			modifier = {
				factor = 1.25
				has_trait = education_stewardship
			}
		}
		stress_impact = {
			diligent = minor_stress_impact_loss
			generous = minor_stress_impact_loss
			education_stewardship_1 = minor_stress_impact_loss
			education_stewardship_2 = minor_stress_impact_loss
			education_stewardship_3 = minor_stress_impact_loss
			education_stewardship_4 = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_benefactor }
		add_prestige = medium_prestige_gain
	}
	option = { # Humble rejection.
		name = ATHA_nickname.0113.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.75
				has_trait = greedy
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			greedy = minor_stress_impact_gain
			humble = medium_stress_impact_loss
			arrogant = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_gain
		add_piety = major_piety_gain

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
	option = { # Cash out investments.
		name = ATHA_nickname.0113.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = lazy
			}
			modifier = {
				factor = 0.25
				has_trait = generous
			}
			modifier = {
				factor = 2
				has_trait = greedy
			}
			modifier = {
				factor = 0.75
				has_trait = just
			}
		}
		stress_impact = {
			generous = major_stress_impact_gain
			greedy = major_stress_impact_loss
			just = minor_stress_impact_gain
			content = minor_stress_impact_gain
		}

		add_gold = major_gold_value
		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_sudden_loss_of_benefaction_modifier
			years = 2
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_benefactor CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_benefactor - Transition from epithet to nickname.
ATHA_nickname.0114 = {
	hidden = yes

	trigger = {
		can_get_nick_the_benefactor = yes
		has_nickname = epithet_the_benefactor
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_benefactor }
	}
}

# nick_the_besieger
# ATHA_nickname.0115 = {

# nick_the_bold
ATHA_nickname.0116 = {
	type = character_event
	title = ATHA_nickname.0116.t
	desc = ATHA_nickname.0116.desc
	theme = war
	left_portrait = root

	trigger = {
		can_get_nick_the_bold = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = brave
		}
		modifier = {
			factor = 1.2
			has_trait = reckless
		}
		modifier = {
			factor = 1.2
			has_trait = impatient
		}
		modifier = {
			factor = 1.1
			var:nick_the_bold_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_bold_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_bold_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_bold_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_bold_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_bold_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_bold }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0116.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 2
				has_trait = brave
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.1
				has_trait = aggressive_attacker
			}
			modifier = {
				factor = 1.2
				has_trait = reckless
			}
			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 0.5
				has_trait = humble
			}
			modifier = {
				factor = 0.5
				has_trait = patient
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			arrogant = medium_stress_impact_loss
			reckless = minor_stress_impact_loss
			content = minor_stress_impact_gain
			humble = medium_stress_impact_gain
			patient = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_bold }
		add_prestige = major_prestige_gain
	}
	option = { # I am getting too old for this.
		name = ATHA_nickname.0116.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 2
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = lazy
			}
			modifier = {
				factor = 1.25
				age >= 45
			}
			modifier = {
				factor = 1.5
				age >= 50
			}
			modifier = {
				factor = 2
				age >= 60
			}
			modifier = {
				factor = 3
				age >= 70
			}
		}
		stress_impact = {
			brave = medium_stress_impact_gain
			arrogant = medium_stress_impact_gain
			reckless = minor_stress_impact_gain
			calm = minor_stress_impact_loss
			content = medium_stress_impact_loss
			lazy = medium_stress_impact_loss
		}

		add_prestige = medium_prestige_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_bold CHANGE = nickname_weight_large_decrease }
	}
}

# nick_the_builder
ATHA_nickname.0117 = {
	type = character_event
	title = ATHA_nickname.0117.t
	desc = ATHA_nickname.0117.desc
	theme = stewardship_domain_focus
	left_portrait = root

	trigger = {
		can_get_nick_the_builder = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.1
			var:nick_the_builder_weight > 5
		}
		modifier = {
			factor = 1.2
			var:nick_the_builder_weight > 10
		}
		modifier = {
			factor = 1.3
			var:nick_the_builder_weight > 20
		}
		modifier = {
			factor = 1.4
			var:nick_the_builder_weight > 30
		}
		modifier = {
			factor = 1.5
			var:nick_the_builder_weight > 40
		}
		modifier = {
			factor = 2
			var:nick_the_builder_weight > 50
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_builder }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0117.a
		ai_chance = {
			base = 12

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = architect
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			arrogant = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_builder }
		add_prestige = minor_prestige_gain
	}
	option = { # Reject.
		name = ATHA_nickname.0117.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = greedy
			}
			modifier = {
				factor = 0.5
				has_trait = humble
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
		}
		stress_impact = {
			ambitious = medium_stress_impact_loss
			diligent = minor_stress_impact_loss
			humble = medium_stress_impact_gain
			arrogant = minor_stress_impact_gain
			content = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_gain

		change_nickname_weight_effect = { NICKNAME = nick_the_bold CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_cruel
ATHA_nickname.0118 = {
	type = character_event
	title = ATHA_nickname.0118.t
	desc = ATHA_nickname.0118.desc
	theme = intrigue_intimidation_focus
	left_portrait = root

	trigger = {
		can_get_nick_the_cruel = yes
		NOT = { can_get_nick_the_flayer = yes }
	}

	immediate = {
		select_nickname_councillor_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = sadistic
		}
		modifier = {
			factor = 1.1
			var:nick_the_cruel_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_cruel_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_cruel_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_cruel_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_cruel_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_cruel_weight > 100
		}
		modifier = { # In Greek, this is a play upon Euergetes.
			factor = 2
			uses_greek_for_nickname_localization_trigger = yes
			OR = {
				has_nickname = epithet_the_benefactor
				has_nickname = nick_the_benefactor
			}
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_cruel }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0118.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = shy
			}
			modifier = {
				factor = 1.25
				has_trait = sadistic
			}
		}
		stress_impact = {
			wrathful = minor_stress_impact_loss
			content = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
			just = minor_stress_impact_gain
			compassionate = medium_stress_impact_gain
			arrogant = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_cruel }
		add_piety = medium_piety_loss
	}
	option = { # Change your ways.
		name = ATHA_nickname.0118.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = ambitious
			}
			modifier = { # Wants to keep meeting people. Being known for cruelty will harm that.
				factor = 1.1
				has_trait = gregarious
			}
			modifier = {
				factor = 1.25
				has_trait = just
			}
			modifier = {
				factor = 0.75
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
		}
		stress_impact = {
			ambitious = minor_stress_impact_loss
			just = minor_stress_impact_loss
			arbitrary = minor_stress_impact_gain
			compassionate = medium_stress_impact_loss
			arrogant = minor_stress_impact_loss
			sadistic = major_stress_impact_gain
		}

		random_list = {
			10 = {
				trigger = { has_trait = sadistic }
				remove_trait = sadistic
			}
			10 = {
				trigger = {
					NOR = {
						has_trait = sadistic
						has_trait = callous
						has_trait = compassionate
					}
				}
				add_trait = compassionate
			}
			10 = {
				trigger = { has_trait = wrathful }
				remove_trait = wrathful
			}
			10 = {
				trigger = { has_trait = callous }
				remove_trait = callous
			}
			20 = { }
		}

		add_prestige = medium_prestige_loss
		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_large_decrease }
	}
	option = { # Shut them up.
		name = ATHA_nickname.0118.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
			modifier = {
				factor = 1.25
				has_trait = impatient
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			wrathful = minor_stress_impact_loss
			paranoid = medium_stress_impact_loss
			sadistic = minor_stress_impact_loss
			just = minor_stress_impact_gain
			compassionate = major_stress_impact_gain
			arrogant = minor_stress_impact_gain
		}

		random_held_title = {
			limit = { tier = tier_county }

			title_province = {
				add_province_modifier = {
					modifier = nickname_county_punishment_modifier
					years = 10
				}
			}
		}

		add_prestige = medium_prestige_loss
		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_divine
# ATHA_nickname.0119 = {

# nick_the_divine - Transition from epithet to nickname.
# ATHA_nickname.0120 = {

# nick_the_devourer
ATHA_nickname.0121 = {
	type = character_event
	title = ATHA_nickname.0121.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = ATHA_nickname.0121.desc_good
				trigger = {
					faith = { 
						OR = {
							trait_is_virtue = cannibal
							has_doctrine = tenet_ritual_cannibalism
						}
					}
				}
			}
			desc = ATHA_nickname.0121.desc_bad
		}
	}
	theme = feast_activity
	left_portrait = root

	trigger = {
		can_get_nick_the_devourer = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_devourer }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0121.a_good
		trigger = {
			faith = { 
				OR = {
					trait_is_virtue = cannibal
					has_doctrine = tenet_ritual_cannibalism
				}
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = just
			}
			modifier = {
				factor = 1.5
				has_trait = gluttonous
			}
			modifier = {
				factor = 1.5
				has_trait = zealous
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_loss
			just = medium_stress_impact_gain
			gluttonous = medium_stress_impact_loss
			zealous = medium_stress_impact_loss
			compassionate = major_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_devourer }
		add_prestige = medium_piety_gain
	}
	option = { # Accept the nickname
		name = ATHA_nickname.0121.a_bad
		trigger = {
			faith = { 
				NOR = {
					trait_is_virtue = cannibal
					has_doctrine = tenet_ritual_cannibalism
				}
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = greedy
			}
			modifier = {
				factor = 0.5
				has_trait = just 
			}
			modifier = {
				factor = 2
				has_trait = gluttonous
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
				faith = { trait_is_sin = cannibal }
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.5
				has_trait = comfort_eater
			}
		}
		stress_impact = {
			just = major_stress_impact_gain
			gluttonous = major_stress_impact_loss
			zealous = major_stress_impact_gain
			compassionate = major_stress_impact_gain
			comfort_eater = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_devourer }
		add_prestige = medium_prestige_loss
	}
	option = { # Is it really right to eat people?
		name = ATHA_nickname.0121.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 0.75
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 2
				has_trait = just
			}
			modifier = {
				factor = 2
				has_trait = zealous
				faith = { trait_is_sin = cannibal }
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
				faith = { trait_is_virtue = cannibal }
			}
			modifier = {
				factor = 1.5
				has_trait = compassionate
			}
			modifier = {
				factor = 0.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			base = major_stress_impact_gain
			stubborn = minor_stress_impact_gain
			just = major_stress_impact_loss
			compassionate = medium_stress_impact_loss
		}
		if = {
			limit = {
				has_trait = zealous
				faith = { trait_is_sin = cannibal }
			}
			stress_impact = { zealous = medium_stress_impact_loss }
			add_piety = minor_piety_gain
		} else_if = {
			limit = {
				has_trait = zealous
				faith = { trait_is_virtue = cannibal }
			}
			stress_impact = { zealous = medium_stress_impact_gain }
			add_piety = minor_piety_loss
		}

		remove_trait = cannibal

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_devourer CHANGE = nickname_weight_large_decrease }
	}
	option = { # Maybe I should ease up on meat. I am developing a belly...
		name = ATHA_nickname.0121.c
		trigger = {
			OR = {
				NOT = { current_weight < 0 }
				has_trait = lunatic
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 0.75
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.5
				OR = {
					has_trait = gluttonous
					has_trait = comfort_eater
				}
			}
			modifier = {
				factor = 2
				has_character_modifier = obese_modifier
				OR = {
					has_trait = arrogant
					NOT = { has_trait = gluttonous }
				}
			}
		}
		stress_impact = {
			base = minor_stress_impact_gain
			content = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
			arrogant = medium_stress_impact_loss
			gluttonous = medium_stress_impact_gain
			comfort_eater = medium_stress_impact_gain
		}
		if = {
			limit = { has_trait = comfort_eater }
			remove_trait = comfort_eater
		} else_if = {
			limit = { has_trait = gluttonous }
			remove_trait = gluttonous
		} else_if = {
			limit = { 
				NOT = { has_trait = temperate }
			}
			add_trait = temperate
		} else_if = {
			limit = { has_trait = temperate }
			add_trait = inappetetic
		}

		change_current_weight = -5
		change_nickname_weight_effect = { NICKNAME = nick_the_devourer CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_fat CHANGE = nickname_weight_medium_decrease }
	}
}

# nick_the_flautist
# ATHA_nickname.0122 = {
	
# nick_the_fat
ATHA_nickname.0124 = {
	type = character_event
	title = ATHA_nickname.0124.t
	desc = ATHA_nickname.0124.desc
	theme = feast_activity
	left_portrait = root

	trigger = {
		can_get_nick_the_fat = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			var:nick_the_fat_weight > 30
		}
		modifier = {
			factor = 1.5
			var:nick_the_fat_weight > 40
		}
		modifier = {
			factor = 1.5
			var:nick_the_fat_weight > 50
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_fat }
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_capital_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0124.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so of course I am a bastard!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			depressed_1 = minor_stress_impact_loss
			depressed_genetic = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_fat }
		add_prestige = medium_prestige_loss
	}
	option = { # Throw them in jail.
		name = ATHA_nickname.0124.b
		custom_tooltip = ATHA_nickname_imprison_suppression_tt
		ai_chance = {
			base = 12

			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
			modifier = {
				factor = 1.1
				has_trait = sadistic
			}
			modifier = {
				factor = 1.2
				has_trait = arbitrary
			}
			modifier = {
				factor = 0.5
				has_trait = just
			}
		}
		stress_impact = {
			vengeful = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			just = medium_stress_impact_gain
			arbitrary = minor_stress_impact_loss
		}

		prevent_nickname_by_county_imprison_effect = yes
	}
	option = { # Invite them for dinner!
		name = ATHA_nickname.0124.c
		custom_tooltip = ATHA_nickname_feast_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.2
				OR = {
					has_trait = reveler_1
					has_trait = reveler_2
					has_trait = reveler_3
				}
			}
			modifier = {
				factor = 1.2
				OR = {
					has_trait = gluttonous
					has_trait = comfort_eater
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.8
				has_trait = stubborn
			}
			modifier = {
				factor = 0.1
				has_trait = paranoid
			}
		}
		stress_impact = {
			reveler_1 = minor_stress_impact_loss
			reveler_2 = minor_stress_impact_loss
			reveler_3 = minor_stress_impact_loss
			comfort_eater = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			stubborn = minor_stress_impact_loss
			paranoid = major_stress_impact_gain
		}

		add_prestige = minor_prestige_loss
		add_character_modifier = {
			modifier = nickname_feasting_with_commoners_modifier
			years = 3
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_medium_decrease }
	}
}

# nick_the_flayer
ATHA_nickname.0125 = {
	type = character_event
	title = ATHA_nickname.0125.t
	desc = ATHA_nickname.0125.desc
	theme = death
	override_background = { event_background = gallows }
	left_portrait = root

	trigger = {
		can_get_nick_the_flayer = yes
	}

	immediate = {
		select_independent_ruler_effect = yes 

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 0.25
			NOT = { has_trait = sadistic }
		}
		modifier = {
			factor = 1.1
			var:nick_the_flayer_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_flayer_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_flayer_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_flayer_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_flayer_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_flayer_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_flayer }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0125.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = vengeful
			}
			modifier = {
				factor = 1.25
				has_trait = paranoid
			}
			modifier = {
				factor = 2
				has_trait = sadistic
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			paranoid = minor_stress_impact_loss
			sadistic = major_stress_impact_loss
			compassionate = minor_stress_impact_gain
			arrogant = medium_stress_impact_gain
			gregarious = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_flayer }
		add_piety = major_piety_loss
		add_prestige = medium_prestige_gain
		add_dread = major_dread_gain
	}
	option = { # Commission a work to propagandize.
		name = ATHA_nickname.0125.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = forgiving
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
			modifier = {
				factor = 0.5
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.1
				has_trait = arbitrary
			}
		}
		stress_impact = {
			calm = minor_stress_impact_loss
			forgiving = minor_stress_impact_loss
			greedy = medium_stress_impact_gain
			honest = medium_stress_impact_gain
			arrogant = medium_stress_impact_loss
		}

		add_gold = medium_gold_loss
		add_character_modifier = {
			modifier = nickname_commission_flayer_propaganda_modifier
			years = 2
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_benefactor CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_increase }
	}
	option = { # Reform.
		name = ATHA_nickname.0125.c
		ai_chance = {
			base = 10

			modifier = { # Lots of work.
				factor = 0.75
				NOT = { has_trait = diligent }
			}
			modifier = {
				factor = 0.75
				has_trait = stubborn
			}
			modifier = { # Nobody wants to dine with a murderer.
				factor = 1.25
				has_trait = gregarious
			}
			modifier = {
				factor = 1.25
				has_trait = just
			}
			modifier = {
				factor = 1.5
				has_trait = compassionate
			}
		}
		stress_impact = {
			base = minor_stress_impact_gain
			diligent = minor_stress_impact_loss
			stubborn = minor_stress_impact_gain
			gregarious = minor_stress_impact_loss
			just = minor_stress_impact_loss
			compassionate = medium_stress_impact_gain
			lazy = medium_stress_impact_gain
		}

		random_list = {
			10 = {
				trigger = { has_trait = sadistic }
				remove_trait = sadistic
			}
			10 = {
				trigger = {
					NOR = {
						has_trait = sadistic
						has_trait = callous
						has_trait = compassionate
					}
				}
				add_trait = compassionate
			}
			10 = {
				trigger = { has_trait = wrathful }
				remove_trait = wrathful
			}
			10 = {
				trigger = { has_trait = callous }
				remove_trait = callous
			}
		}
		add_prestige = major_prestige_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_flayer CHANGE = nickname_weight_medium_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_father_loving
# ATHA_nickname.0126 = {

# nick_the_father_loving - Transition from epithet to nickname.
# ATHA_nickname.0127 = {

# nick_the_gardener
ATHA_nickname.0128 = {
	type = character_event
	title = ATHA_nickname.0128.t
	desc = ATHA_nickname.0128.desc
	theme = stewardship
	override_background = { event_background = garden }
	left_portrait = root

	trigger = {
		can_get_nick_the_gardener = yes
	}

	immediate = {
		select_nickname_capital_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.1
			var:nick_the_gardener_weight > 5
		}
		modifier = {
			factor = 1.2
			var:nick_the_gardener_weight > 10
		}
		modifier = {
			factor = 1.3
			var:nick_the_gardener_weight > 15
		}
		modifier = {
			factor = 1.4
			var:nick_the_gardener_weight > 20
		}
		modifier = {
			factor = 1.5
			var:nick_the_gardener_weight > 25
		}
		modifier = {
			factor = 2
			var:nick_the_gardener_weight > 30
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_gardener }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0128.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = diligent
			}
			modifier = {
				factor = 1.25
				has_trait = stubborn
			}
			modifier = {
				factor = 1.25
				has_trait = shy
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.25
				has_trait = arrogant # I'M NO DUNGSHOVELING PEASANT!
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			diligent = minor_stress_impact_loss
			stubborn = minor_stress_impact_loss
			shy = minor_stress_impact_loss
			arrogant = major_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_gardener }
	}
	option = { # Get new hobbies.
		name = ATHA_nickname.0128.b
		custom_tooltip = ATHA_nickname.0128.b.new_hobby_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious
			}
			modifier = {
				factor = 0.75
				NOR = {
					has_trait = education_stewardship
					has_trait = education_learning
				}
			}
		}
		stress_impact = {
			lazy = minor_stress_impact_loss
			arrogant = medium_stress_impact_loss
			content = minor_stress_impact_gain
		}

		hidden_effect = {
			random_list = {
				10 = {
					trigger = {
						NOT = { has_trait = lifestyle_blademaster }
					}
					modifier = {
						factor = 1.25
						has_trait = education_martial
					}
					modifier = {
						factor = 1.5
						has_trait = brave
					}
					modifier = {
						factor = 0.25
						has_trait = blind
					}

					add_trait = blademaster_1
				}
				10 = {
					trigger = {
						NOT = { has_trait = lifestyle_hunter }
					}
					modifier = {
						factor = 1.5
						has_trait = arrogant
					}
					modifier = {
						factor = 1.25
						has_trait = gregarious
					}
					modifier = {
						factor = 0.75
						has_trait = shy
					}
					modifier = {
						factor = 0.75
						has_trait = impatient
					}
					modifier = {
						factor = 0
						has_trait = blind
					}

					add_trait = hunter_1
					change_nickname_weight_effect = { NICKNAME = nick_the_hunter CHANGE = nickname_weight_small_increase }
				}
				10 = {
					trigger = {
						NOT = { has_trait = lifestyle_reveler }
					}
					modifier = {
						factor = 2
						has_trait = gregarious
					}
					modifier = {
						factor = 1.5
						OR = {
							has_trait = comfort_eater
							has_trait = gluttonous
						}
					}
					modifier = {
						factor = 0.5
						has_trait = inappetetic
					}

					add_trait = reveler_1
				}
				10 = {
					trigger = {
						NOT = { has_trait = lifestyle_physician }
					}
					modifier = {
						factor = 2
						has_trait = sadistic
					}
					modifier = {
						factor = 1.25
						has_trait = education_learning
					}
					modifier = {
						factor = 1.25
						has_trait = compassionate
					}
					modifier = {
						factor = 0
						has_trait = blind
					}

					add_trait = physician_1
				}
				10 = {
					trigger = {
						NOT = { has_trait = drunkard }
					}
					modifier = { # Drown their sorrows in booze.
						factor = 1.5
						OR = {
							has_trait = depressed_1
							has_trait = depressed_genetic
						}
					}
					modifier = {
						factor = 1.25
						has_trait = lifestyle_reveler
					}
					modifier = {
						factor = 1.25
						has_trait = gluttonous
					}
					modifier = {
						factor = 0.5
						has_trait = temperate
					}

					add_trait = drunkard
				}
				10 = {
					trigger = {
						NOT = { has_trait = rakish }
					}
					modifier = { # Drown their sorrows in sex.
						factor = 1.5
						OR = {
							has_trait = depressed_1
							has_trait = depressed_genetic
						}
					}
					modifier = {
						factor = 2
						has_trait = lustful
					}
					modifier = {
						factor = 0.25
						has_trait = chaste
					}
					modifier = {
						factor = 0
						has_trait = celibate
					}

					add_trait = rakish
				}
				5 = {
					trigger = {
						NOT = { has_trait = journaller }
					}
					modifier = {
						factor = 2
						has_trait = education_learning
					}
					modifier = {
						factor = 1.5
						has_trait = diligent
					}
					modifier = {
						factor = 0.5
						has_trait = impatient
					}
					modifier = {
						factor = 0.1
						has_trait = blind
					}

					add_trait = journaller
				}
				5 = {
					trigger = {
						NOT = { has_trait = athletic }
					}
					modifier = {
						factor = 1.5
						has_trait = diligent
					}
					modifier = {
						factor = 1.5
						OR = {
							has_trait = strong
							has_trait = physique_good
						}
					}
					modifier = {
						factor = 1.1
						has_trait = brave
					}
					modifier = {
						factor = 0.5
						OR = {
							has_trait = physique_bad
							has_trait = clubfooted
							has_trait = hunchbacked
							has_trait = spindly
							has_trait = one_legged
							has_trait = weak
							has_trait = maimed
						}
					}
					modifier = {
						factor = 0.25
						has_trait = blind
					}

					add_trait = athletic
				}
				50 = {
					modifier = {
						factor = 2
						has_trait = lazy
					}
					modifier = {
						factor = 2
						has_trait = fickle
					}
				}
			}
		}

		add_prestige = medium_prestige_loss
		change_nickname_weight_effect = { NICKNAME = nick_the_gardener CHANGE = nickname_weight_large_decrease }
	}
}

# nick_the_godlike
# ATHA_nickname.0129 = {

# nick_the_good
ATHA_nickname.0130 = {
	type = character_event
	title = ATHA_nickname.0130.t
	desc = ATHA_nickname.0130.desc
	theme = realm
	left_portrait = root

	trigger = {
		can_get_nick_the_good = yes
	}

	immediate = {
		select_nickname_councillor_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.1
			has_trait = compassionate
		}
		modifier = {
			factor = 1.1
			has_trait = calm
		}
		modifier = {
			factor = 1.1
			var:nick_the_good_weight > 50
		}
		modifier = {
			factor = 1.2
			var:nick_the_good_weight > 60
		}
		modifier = {
			factor = 1.3
			var:nick_the_good_weight > 70
		}
		modifier = {
			factor = 1.4
			var:nick_the_good_weight > 80
		}
		modifier = {
			factor = 1.5
			var:nick_the_good_weight > 90
		}
		modifier = {
			factor = 2
			var:nick_the_good_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_good }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0130.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.25
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.1
				has_trait = just
			}
			modifier = {
				factor = 1.25
				has_trait = compassionate
			}
		}
		stress_impact = {
			stubborn = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = medium_stress_impact_loss
			compassionate = minor_stress_impact_loss
			humble = major_stress_impact_gain
			paranoid = minor_stress_impact_gain
			sadistic = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_good }
		add_prestige = medium_prestige_gain
		add_piety = medium_piety_gain
	}
	option = { # Humble refusal.
		name = ATHA_nickname.0130.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 2
				has_trait = humble
			}
			modifier = {
				factor = 1.25
				has_trait = paranoid
			}
			modifier = {
				factor = 1.25
				has_trait = sadistic
				NOT = { has_trait = deceitful }
			}
		}
		stress_impact = {
			humble = major_stress_impact_loss
			paranoid = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
			honest = minor_stress_impact_gain
			arrogant = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_humble_modifier
			years = 10
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_hawk
ATHA_nickname.0131 = {
	type = character_event
	title = ATHA_nickname.0131.t
	desc = ATHA_nickname.0131.desc
	theme = intrigue
	left_portrait = root

	trigger = {
		can_get_nick_the_hawk = yes
	}

	immediate = {
		select_independent_ruler_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.1
			has_trait = reckless
		}
		modifier = {
			factor = 1.1
			has_trait = greedy
		}
		modifier = {
			factor = 1.1
			has_trait = impatient
		}
		modifier = {
			factor = 1.5
			has_trait = ambitious
		}
		modifier = {
			factor = 1.1
			var:nick_the_hawk_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_hawk_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_hawk_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_hawk_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_hawk_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_hawk_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_hawk }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0131.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.25
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = greedy
			}
			modifier = {
				factor = 1.1
				has_trait = impatient
			}
		}
		stress_impact = {
			ambitious = medium_stress_impact_loss
			stubborn = minor_stress_impact_loss
			content = minor_stress_impact_gain
			calm = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_hawk }
		add_prestige = minor_prestige_gain
	}
	option = { # Stop being so grasping.
		name = ATHA_nickname.0131.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 1.25
				has_trait = patient
			}
		}
		stress_impact = {
			calm = minor_stress_impact_loss
			content = minor_stress_impact_loss
			fickle = medium_stress_impact_loss
			patient = minor_stress_impact_loss
			ambitious = medium_stress_impact_gain
		}

		random_list = {
			10 = {
				trigger = { has_trait = ambitious }
				remove_trait = ambitious
			}
			10 = {
				trigger = { has_trait = impatient }
				remove_trait = impatient
			}
			10 = {
				trigger = { has_trait = reckless }
				remove_trait = reckless
			}
			10 = {
				trigger = { 
					NOT = { has_trait = ambitious }
				}
				add_trait = content
			}
			20 = { }
		}

		add_prestige = medium_prestige_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_bold CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_hawk CHANGE = nickname_weight_large_decrease }
	}
}

# nick_the_hunter
ATHA_nickname.0132 = {
	type = character_event
	title = ATHA_nickname.0132.t
	desc = ATHA_nickname.0132.desc
	theme = hunting
	left_portrait = root

	trigger = {
		can_get_nick_the_hunter = yes
	}

	immediate = {
		select_nickname_councillor_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.1
			var:nick_the_hunter_weight > 20
		}
		modifier = {
			factor = 1.2
			var:nick_the_hunter_weight > 25
		}
		modifier = {
			factor = 1.3
			var:nick_the_hunter_weight > 30
		}
		modifier = {
			factor = 1.4
			var:nick_the_hunter_weight > 35
		}
		modifier = {
			factor = 1.5
			var:nick_the_hunter_weight > 40
		}
		modifier = {
			factor = 2
			var:nick_the_hunter_weight > 50
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_hunter }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0132.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = craven
			}
			modifier = {
				factor = 1.1
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = gregarious
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = gluttonous
			}
			modifier = {
				factor = 1.1
				has_trait = trusting
			}
			modifier = {
				factor = 1.25
				has_trait = sadistic
			}
			modifier = {
				factor = 1.5
				has_trait = lifestyle_hunter
			}
		}
		stress_impact = {
			gregarious = minor_stress_impact_loss
			arrogant = minor_stress_impact_loss
			gluttonous = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
			hunter_1 = medium_stress_impact_loss
			hunter_2 = medium_stress_impact_loss
			hunter_3 = medium_stress_impact_loss
			just = minor_stress_impact_gain
			compassionate = major_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_hunter }
		add_prestige = medium_prestige_gain
	}
	option = { # Adopt a pet.
		name = ATHA_nickname.0132.b
		trigger = {
			NAND = {
				has_character_modifier = cat_story_modifier
				has_character_modifier = dog_story_modifier
				has_character_modifier = horse_story_modifier
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = shy
			}
			modifier = {
				factor = 1.25
				has_trait = just
			}
			modifier = {
				factor = 1.25
				has_trait = temperate
			}
			modifier = {
				factor = 2
				has_trait = compassionate
			}
		}
		trait = hunter_1
		trait = hunter_2
		trait = hunter_3
		stress_impact = {
			fickle = minor_stress_impact_loss
			just = minor_stress_impact_loss
			temperate = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			sadistic = minor_stress_impact_gain
			hunter_1 = major_stress_impact_gain
			hunter_2 = major_stress_impact_gain
			hunter_3 = major_stress_impact_gain
		}

		if = {
			limit = { has_trait = lifestyle_hunter }

			remove_trait = hunter_1
			remove_trait = hunter_2
			remove_trait = hunter_3
		}

		random_list = {
			40 = {
				trigger = {
					NOT = { has_character_modifier = cat_story_modifier }
				}
				start_cat_story_cycle_effect = yes
			}
			40 = {
				trigger = {
					NOT = { has_character_modifier = dog_story_modifier }
				}
				start_dog_story_cycle_effect = yes
			}
			20 = {
				trigger = {
					NOT = { has_character_modifier = horse_story_modifier }
				}
				modifier = {
					factor = 2
					has_trait = education_martial
				}
				start_warhorse_story_cycle_effect = yes
			}
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_hunter CHANGE = nickname_weight_large_decrease }
	}
}

# nick_the_illustrious
ATHA_nickname.0133 = {
	type = character_event
	title = ATHA_nickname.0133.t
	desc = ATHA_nickname.0133.desc
	theme = diplomacy
	left_portrait = root

	trigger = {
		can_get_nick_the_illustrious = yes
		NOT = { has_nickname = epithet_the_illustrious }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = august
		}
		modifier = {
			factor = 1.1
			var:nick_the_illustrious_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_illustrious_weight > 35
		}
		modifier = {
			factor = 1.3
			var:nick_the_illustrious_weight > 40
		}
		modifier = {
			factor = 1.4
			var:nick_the_illustrious_weight > 45
		}
		modifier = {
			factor = 1.5
			var:nick_the_illustrious_weight > 50
		}
		modifier = {
			factor = 2
			var:nick_the_illustrious_weight > 60
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_illustrious }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0133.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 2
				has_trait = arrogant
			}
			modifier = {
				factor = 0.5
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
			modifier = {
				factor = 2
				has_trait = august
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			ambitious = medium_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = major_stress_impact_loss
			humble = medium_stress_impact_gain
			depressed_1 = medium_stress_impact_gain
			depressed_genetic = medium_stress_impact_gain
			august = medium_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_illustrious }
		add_prestige = major_prestige_gain
	}
	option = { # Stop spending so much on the court.
		name = ATHA_nickname.0133.b
		ai_chance = {
			base = 10

			modifier = { # May want to spend money on different benefactions.
				factor = 1.25
				has_trait = generous
			}
			modifier = {
				factor = 2
				has_trait = greedy
			}
			modifier = {
				factor = 0.75
				has_trait = gregarious
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = { # Less people at the court is less spies!
				factor = 1.25
				has_trait = paranoid
			}
		}
		stress_impact = {
			generous = minor_stress_impact_loss
			greedy = major_stress_impact_loss
			gregarious = minor_stress_impact_loss
			humble = medium_stress_impact_loss
			paranoid = minor_stress_impact_loss
			august = major_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_diminished_court_modifier
			years = 5
		}
		add_prestige = medium_prestige_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_illustrious CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_medium_decrease }
	}
}

# nick_the_illustrious - Transition from epithet to nickname.
ATHA_nickname.0134 = {
	hidden = yes

	trigger = {
		can_get_nick_the_illustrious = yes
		has_nickname = epithet_the_illustrious
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_illustrious }
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = august
		}
		modifier = {
			factor = 1.1
			var:nick_the_illustrious_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_illustrious_weight > 35
		}
		modifier = {
			factor = 1.3
			var:nick_the_illustrious_weight > 40
		}
		modifier = {
			factor = 1.4
			var:nick_the_illustrious_weight > 45
		}
		modifier = {
			factor = 1.5
			var:nick_the_illustrious_weight > 50
		}
		modifier = {
			factor = 2
			var:nick_the_illustrious_weight > 60
		}
	}
}
 
# nick_the_invincible
ATHA_nickname.0135 = {
	type = character_event
	title = ATHA_nickname.0135.t
	desc = ATHA_nickname.0135.desc 
	theme = battle
	left_portrait = root

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			is_commanding_army = yes
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_invincible }
		}
	}

	trigger = {
		can_get_nick_the_invincible = yes
	}

	immediate = { 
		set_nickname_cooldown_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0135.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = brave
			}
			modifier = {
				factor = 1.25
				has_trait = ambitious
			}
			modifier = {
				factor = 0.75
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = education_martial
			}
			modifier = {
				factor = 1.25
				has_trait = lifestyle_blademaster
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			content = minor_stress_impact_gain
			arrogant = medium_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_invincible }
		dynasty = { add_dynasty_prestige = medium_dynasty_prestige_gain }
	}
	option = { # Humble rejection.
		name = ATHA_nickname.0135.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = shy
			}
			modifier = {
				factor = 1.5
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
		}
		stress_impact = {
			brave = minor_stress_impact_gain
			arrogant = medium_stress_impact_gain
			content = minor_stress_impact_loss
			shy = minor_stress_impact_loss
			paranoid = medium_stress_impact_loss
		}

		add_character_modifier = {
			modifier = nickname_humble_in_victory_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
	option = { # Ramp up recruitment.
		name = ATHA_nickname.0135.c
		ai_chance = {
			base = 10
			
			modifier = {
				factor = 2
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = wrathful
			}
			modifier = {
				factor = 1.1
				has_trait = vengeful
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}
		}
		stress_impact = {
			ambitious = major_stress_impact_loss
			diligent = minor_stress_impact_loss
			education_martial_1 = minor_stress_impact_loss
			education_martial_2 = minor_stress_impact_loss
			education_martial_3 = minor_stress_impact_loss
			education_martial_4 = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			content = minor_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_impassioned_recruitment_modifier
			years = 5
		}
	}
}

# nick_the_just
ATHA_nickname.0136 = {
	type = character_event
	title = ATHA_nickname.0136.t
	desc = ATHA_nickname.0136.desc
	theme = realm
	left_portrait = root

	trigger = {
		can_get_nick_the_just = yes
		NOT = { has_nickname = epithet_the_just }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_just }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0136.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.1
				has_trait = forgiving
			}
			modifier = {
				factor = 1.1
				has_trait = arrogant
			}
			modifier = {
				factor = 1.5
				has_bad_nickname = yes
			}
			modifier = {
				factor = 1.25
				has_trait = just
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
				faith = { trait_is_virtue = just }
			}
		}
		stress_impact = {
			just = minor_stress_impact_loss
			arbitrary = medium_stress_impact_gain
			humble = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_just }
		add_prestige = medium_prestige_gain
	}
	option = { # Humble rejection.
		name = ATHA_nickname.0136.b
		trait = humble
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = {
				factor = 1.5
				has_trait = just
			}
		}
		stress_impact = {
			humble = medium_stress_impact_loss
			just = medium_stress_impact_loss
			arbitrary = medium_stress_impact_gain
		}

		add_piety = medium_piety_gain

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
	option = { # Arbitrary approach.
		name = ATHA_nickname.0136.c
		trait = arbitrary
		ai_chance = {
			base = 10
			
			modifier = {
				factor = 1.25
				has_trait = vengeful
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 1.5
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
				faith = { trait_is_virtue = arbitrary }
			}
			modifier = {
				factor = 0.75
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = sadistic
			}
			modifier = {
				factor = 1.1
				has_trait = callous
			}
		}
		stress_impact = {
			vengeful = minor_stress_impact_loss
			arbitrary = medium_stress_impact_loss
			compassionate = minor_stress_impact_gain
			just = medium_stress_impact_gain
			sadistic = minor_stress_impact_loss
		}

		if = {
			limit = { has_trait = just }

			remove_trait = just
		} else_if = {
			limit = {
				NOT = { has_trait = arbitrary }
			}

			random = {
				chance = 10
				add_trait = arbitrary
			}
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_just CHANGE = nickname_weight_large_decrease }
	}
}

# nick_the_just - Transition from epithet to nickname.
ATHA_nickname.0137 = {
	hidden = yes

	trigger = {
		can_get_nick_the_just = yes
		has_nickname = epithet_the_just
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_just }
	}
}

# nick_the_lame
ATHA_nickname.0138 = {
	type = character_event
	title = ATHA_nickname.0138.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_trait = incapable }
				desc = ATHA_nickname.0138.desc_incapable
			}
			desc = {
				desc = ATHA_nickname.0138.desc_opening
				first_valid = {
					triggered_desc = {
						trigger = { has_trait = maimed }
						desc = ATHA_nickname.0138.desc_maimed
					}
					triggered_desc = {
						trigger = {
							OR = {
								has_trait = physique_bad
								has_trait = hunchbacked
								has_trait = spindly
							}
						}
						desc = ATHA_nickname.0138.desc_genetic
					}
					desc = ATHA_nickname.0138.desc_default
				}
				desc = ATHA_nickname.0138.desc_closing
			}
		}
	}
	theme = physical_health
	left_portrait = root

	trigger = {
		can_get_nick_the_lame = yes
	}

	immediate = {
		select_nickname_physician_effect = yes
		select_two_independent_rulers_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 0.5

		modifier = {
			factor = 10
			has_trait = incapable
		}
		modifier = {
			factor = 5
			has_trait = infirm
		}
		modifier = {
			factor = 2
			has_trait = maimed
		}
		modifier = {
			factor = 2
			has_trait = physique_bad
		}
		modifier = {
			factor = 2
			has_trait = hunchbacked
		}
		modifier = {
			factor = 2
			has_trait = spindly
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_lame }
		}
	}

	option = { # Accept the nickname.
		name = {
			trigger = { has_trait = incapable }
			text = ATHA_nickname.0138.a_incapable
		}
		name = {
			trigger = {
				NOT = { has_trait = incapable }
			}
			text = ATHA_nickname.0138.a_regular
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			ambitious = medium_stress_impact_gain
			arrogant = medium_stress_impact_gain
			depressed_1 = minor_stress_impact_loss
			depressed_genetic = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_lame }
		add_prestige = major_prestige_loss
	}
	option = { # Exercise to get strength.
		name = ATHA_nickname.0138.b
		trigger = {
			OR = {
				has_trait = weak
				has_trait = physique_bad
			}
			NOR = {
				has_trait = maimed
				has_trait = one_legged
				has_trait = infirm
				has_trait = incapable
				has_trait = wounded
			}
		}
		trait = weak
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = diligent
			}
			modifier = {
				factor = 0.25
				has_trait = lazy
			}
			modifier = { # Exercise tends to take time before seeing results.
				factor = 0.75
				has_trait = impatient
			}
			modifier = {
				factor = 1.1
				has_trait = temperate
			}
			modifier = {
				factor = 1.25
				has_trait = education_martial
			}
		}
		stress_impact = {
			diligent = minor_stress_impact_loss
			lazy = major_stress_impact_gain
			impatient = minor_stress_impact_gain
			content = minor_stress_impact_gain
		}

		if = {
			limit = { has_trait = athletic }
			random = {
				chance = 10
				add_trait = athletic
			}
		}

		random_list = {
			10 = {
				trigger = { has_trait = weak }
				remove_trait = weak
			}
			10 = {
				trigger = {
					NOT = { has_trait = weak }
				}
				add_trait = strong
			}
			20 = {
				add_character_modifier = {
					modifier = exercise_modifier
					months = 6
				}
			}
		}

		add_prestige = medium_prestige_loss
	}
	option = { # Try to get court physician to fix the disformity.
		name = ATHA_nickname.0138.c
		custom_tooltip = ATHA_nickname.0138.c_tt
		trigger = {
			exists = scope:nickname_physician
			OR = {
				has_trait = maimed
				has_trait = hunchbacked
				has_trait = spindly
			}
			NOT = { has_trait = incapable }
		}
		trait = maimed
		trait = hunchbacked
		trait = spindly
		ai_chance = {
			base = 5 # AI less likely to perform dangerous surgeries.

			modifier = {
				factor = 1.25
				has_trait = brave
			}
			modifier = {
				factor = 0.75
				has_trait = craven
			}
			modifier = {
				factor = 0.5
				has_trait = paranoid # Doesn't trust a doctor.
			}
			modifier = {
				factor = 1.25
				has_trait = education_learning
			}
		}
		stress_impact = {
			craven = minor_stress_impact_gain
			content = minor_stress_impact_gain
			paranoid = medium_stress_impact_gain
		}

		random_list = {
			10 = {
				trigger = { has_trait = maimed }
				modifier = {
					factor = 0.5
					scope:nickname_physician = { learning <= low_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= mediocre_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= medium_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= decent_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= very_high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= extremely_high_skill_rating }
				}
				modifier = {
					factor = 1.5
					scope:nickname_physician = { has_trait = physician_2 }
				}
				modifier = {
					factor = 2
					scope:nickname_physician = { has_trait = physician_3 }
				}
				remove_trait = maimed
			}
			5 = {
				trigger = { has_trait = hunchbacked }
				modifier = {
					factor = 0.5
					scope:nickname_physician = { learning <= low_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= mediocre_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= medium_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= decent_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= very_high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= extremely_high_skill_rating }
				}
				modifier = {
					factor = 1.5
					scope:nickname_physician = { has_trait = physician_2 }
				}
				modifier = {
					factor = 2
					scope:nickname_physician = { has_trait = physician_3 }
				}
				remove_trait = hunchbacked
			}
			5 = {
				trigger = { has_trait = spindly }
				modifier = {
					factor = 0.5
					scope:nickname_physician = { learning <= low_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= mediocre_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= medium_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= decent_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= very_high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= extremely_high_skill_rating }
				}
				modifier = {
					factor = 1.5
					scope:nickname_physician = { has_trait = physician_2 }
				}
				modifier = {
					factor = 2
					scope:nickname_physician = { has_trait = physician_3 }
				}
				remove_trait = spindly
			}
			5 = {
				modifier = {
					factor = 2
					OR = {
						has_trait = hunchbacked
						has_trait = spindly
					}
				}
				custom_tooltip = ATHA_nickname.0138.c_death_tt
				hidden_effect = {
					death = {
						death_reason = death_treatment
						killer = scope:nickname_physician
					}
				}
			}
			10 = { }
		}

		add_gold = minor_gold_loss
		add_prestige = medium_prestige_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_bold CHANGE = nickname_weight_medium_increase }
	}
}

# nick_the_mad
ATHA_nickname.0139 = {
	type = character_event
	title = ATHA_nickname.0139.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_trait = lunatic }
				desc = ATHA_nickname.0139.desc_lunatic
			}
			desc = ATHA_nickname.0139.desc_normal
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					has_trait = lunatic
					uses_greek_for_nickname_localization_trigger = yes
					OR = {
						has_nickname = epithet_the_illustrious
						has_nickname = nick_the_illustrious
					}
				}
				desc = ATHA_nickname.0139.desc_lunatic_epithet_after
			}
			triggered_desc = {
				trigger = {
					uses_greek_for_nickname_localization_trigger = yes
					OR = {
						has_nickname = epithet_the_illustrious
						has_nickname = nick_the_illustrious
					}
				}
				desc = ATHA_nickname.0139.desc_normal_epithet_after
			}
			triggered_desc = {
				trigger = { has_trait = lunatic }
				desc = ATHA_nickname.0139.desc_lunatic_after
			}
			desc = ATHA_nickname.0139.desc_normal_after
		}
	}
	theme = mental_health
	left_portrait = root
	right_portrait = scope:nickname_councillor

	trigger = {
		can_get_nick_the_mad = yes
	}

	immediate = {
		select_nickname_councillor_effect = yes
		select_nickname_ancestor_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = lunatic
		}
		modifier = { # In Greek, this is a play upon Epiphanes
			factor = 2
			uses_greek_for_nickname_localization_trigger = yes
			OR = {
				has_nickname = epithet_the_illustrious 
				has_nickname = nick_the_illustrious
			}
		}

		modifier = {
			factor = 1.1
			var:nick_the_mad_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_mad_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_mad_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_mad_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_mad_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_mad_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_mad }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0139.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 10
				has_trait = lunatic
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = ambitious
			}
		}
		stress_impact = {
			lunatic_1 = major_stress_impact_loss
			lunatic_genetic = major_stress_impact_loss
			paranoid = medium_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_mad }
		add_prestige = major_prestige_loss
	}
	option = { # Roll back some of my reforms.
		name = ATHA_nickname.0139.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = lunatic
			}
			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 0.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.5
				has_trait = fickle
			}
			modifier = {
				factor = 0.75
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = just
			}
			modifier = {
				factor = 0.75
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
			modifier = {
				factor = 0.9
				has_trait = impatient
			}
		}
		stress_impact = {
			lunatic_1 = minor_stress_impact_gain
			lunatic_genetic = minor_stress_impact_gain
			calm = minor_stress_impact_loss
			ambitious = medium_stress_impact_gain
			fickle = medium_stress_impact_loss
			stubborn = minor_stress_impact_gain
			arbitrary = minor_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_cancel_lunatic_reforms_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_mad CHANGE = nickname_weight_medium_decrease }
	}
	option = { # Retreat from public life.
		name = ATHA_nickname.0139.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = brave
			}
			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 0.75
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = lazy
			}
			modifier = {
				factor = 0.5
				has_trait = gregarious
			}
			modifier = {
				factor = 2
				has_trait = shy
			}
			modifier = {
				factor = 0.75
				has_trait = patient
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
			modifier = {
				factor = 0.5
				has_trait = lifestyle_reveler
			}
		}
		stress_impact = {
			base = minor_stress_impact_gain
			wrathful = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
			lazy = minor_stress_impact_loss
			gregarious = medium_stress_impact_gain
			shy = major_stress_impact_loss
			patient = minor_stress_impact_gain
			paranoid = medium_stress_impact_loss
			reveler_1 = medium_stress_impact_gain
			reveler_2 = medium_stress_impact_gain
			reveler_3 = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_retreat_from_public_life_modifier
			years = 3
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_autocrat CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_illustrious CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_mother_loving
# ATHA_nickname.0140 = {

# nick_the_mother_loving - Transition from epithet to nickname.
# ATHA_nickname.0141 = {

# nick_the_mindbreaker
ATHA_nickname.0142 = {
	type = character_event
	title = ATHA_nickname.0142.t
	desc = ATHA_nickname.0142.desc
	theme = intrigue_intimidation_focus
	left_portrait = root

	trigger = {
		can_get_nick_the_mindbreaker = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = torturer
		}
		modifier = {
			factor = 1.1
			var:nick_the_mindbreaker_weight > 3
		}
		modifier = {
			factor = 1.2
			var:nick_the_mindbreaker_weight > 5
		}
		modifier = {
			factor = 1.3
			var:nick_the_mindbreaker_weight > 8
		}
		modifier = {
			factor = 1.4
			var:nick_the_mindbreaker_weight > 10
		}
		modifier = {
			factor = 1.5
			var:nick_the_mindbreaker_weight > 15
		}
		modifier = {
			factor = 2
			var:nick_the_mindbreaker_weight > 20
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_mindbreaker }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0142.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.75
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 2
				has_trait = torturer
			}
			modifier = {
				factor = 1.25
				has_trait = callous
			}
			modifier = {
				factor = 2
				has_trait = sadistic
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
			honest = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			torturer = major_stress_impact_loss
			callous = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_mindbreaker }
		add_prestige = major_prestige_loss
	}
	option = { # Public Apology.
		name = ATHA_nickname.0142.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.25
				has_trait = just
			}
			modifier = {
				factor = 1.25
				has_trait = trusting
			}
			modifier = {
				factor = 1.5
				has_trait = compassionate
			}
		}
		stress_impact = {
			base = medium_stress_impact_gain
			fickle = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			just = minor_stress_impact_loss
			trusting = minor_stress_impact_loss
			compassionate = medium_stress_impact_loss
			callous = minor_stress_impact_gain
			sadistic = medium_stress_impact_gain
			paranoid = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
		add_piety = minor_piety_gain
		add_character_modifier = {
			modifier = nickname_public_apology_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_mindbreaker CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
	option = { # Dread Response
		name = ATHA_nickname.0142.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = craven
			}
			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.75
				has_trait = forgiving
			}
			modifier = {
				factor = 1.25
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.1
				has_trait = impatient
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
			modifier = {
				factor = 1.25
				has_trait = callous
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			craven = minor_stress_impact_gain
			wrathful = minor_stress_impact_loss
			vengeful = medium_stress_impact_loss
			forgiving = minor_stress_impact_gain
			arbitrary = minor_stress_impact_loss
			sadistic = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_air_of_dread_modifier
			years = 5
		}
		add_piety = medium_piety_loss
		random_held_title = {
			limit = { tier = tier_county }

			change_development_progress_with_overflow = -100
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_overpromiser
scripted_trigger can_get_favor_trigger = {
	NOR = {
		has_hook = root
		AND = {
			exists = scope:favor_beneficiary_1
			this = scope:favor_beneficiary_1
		}
		AND = {
			exists = scope:favor_beneficiary_2
			this = scope:favor_beneficiary_2
		}
		AND = {
			exists = scope:favor_beneficiary_3
			this = scope:favor_beneficiary_3
		}
	}
}

scripted_effect select_favor_beneficiary_effect = {
	if = {
		limit = {
			any_vassal = {
				count = 0
				can_get_favor_trigger = yes
			}
		}

		random_courtier = {
			limit = { can_get_favor_trigger = yes }
			save_scope_as = $BENEFICIARY$
		}
	} else = {
		random_vassal = {
			limit = { can_get_favor_trigger = yes }
			weight = {
				base = 1
				modifier = {
					factor = 2
					highest_held_title_tier = tier_county
				}
				modifier = {
					factor = 4
					highest_held_title_tier = tier_duchy
				}
				modifier = {
					factor = 8
					highest_held_title_tier = tier_kingdom
				}
			}
			save_scope_as = $BENEFICIARY$
		}
	}
}

scripted_effect grant_favor_to_beneficiary_if_exists_effect = {
	if = {
		limit = { exists = scope:$BENEFICIARY$ }
		scope:$BENEFICIARY$ = {
			add_hook = {
				type = favor_hook
				target = root
			}
		}
	}
}

ATHA_nickname.0143 = {
	type = character_event
	title = ATHA_nickname.0143.t
	desc = ATHA_nickname.0143.desc
	theme = unfriendly
	left_portrait = root

	trigger = {
		can_get_nick_the_overpromiser = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_favor_beneficiary_effect = { BENEFICIARY = favor_beneficiary_1 }
		select_favor_beneficiary_effect = { BENEFICIARY = favor_beneficiary_2 }
		select_favor_beneficiary_effect = { BENEFICIARY = favor_beneficiary_3 }
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = fickle
		}
		modifier = {
			factor = 1.1
			var:nick_the_overpromiser_weight > 20
		}
		modifier = {
			factor = 1.2
			var:nick_the_overpromiser_weight > 30
		}
		modifier = {
			factor = 1.3
			var:nick_the_overpromiser_weight > 40
		}
		modifier = {
			factor = 1.4
			var:nick_the_overpromiser_weight > 50
		}
		modifier = {
			factor = 1.5
			var:nick_the_overpromiser_weight > 60
		}
		modifier = {
			factor = 2
			var:nick_the_overpromiser_weight > 75
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_overpromiser }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0143.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = deceitful
			}
			modifier = {
				factor = 1.25
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.5
				has_trait = callous
			}
		}
		stress_impact = {
			arbitrary = minor_stress_impact_loss
			callous = medium_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_overpromiser }
		add_prestige = major_prestige_loss
	}
	option = { # Give favours to the court and vassals.
		name = ATHA_nickname.0143.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = forgiving
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.1
				has_trait = just
			}
			modifier = {
				factor = 0
				has_trait = paranoid
			}
		}
		stress_impact = {
			base = medium_stress_impact_gain
			ambitious = medium_stress_impact_gain
			fickle = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			paranoid = major_stress_impact_gain
		}

		grant_favor_to_beneficiary_if_exists_effect = { BENEFICIARY = favor_beneficiary_1 }
		grant_favor_to_beneficiary_if_exists_effect = { BENEFICIARY = favor_beneficiary_2 }
		grant_favor_to_beneficiary_if_exists_effect = { BENEFICIARY = favor_beneficiary_3 }

		change_nickname_weight_effect = { NICKNAME = nick_the_autocrat CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_overpromiser CHANGE = nickname_weight_large_decrease }
	}
}

# nick_the_pious
ATHA_nickname.0144 = {
	type = character_event
	title = ATHA_nickname.0144.t
	desc = ATHA_nickname.0144.desc
	theme = faith
	left_portrait = root

	trigger = {
		can_get_nick_the_pious = yes
		NOT = { has_nickname = epithet_the_pious }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = zealous
		}
		modifier = {
			factor = 1.1
			var:nick_the_pious_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_pious_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_pious_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_pious_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_pious_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_pious_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_pious }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0144.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = stubborn
			}
			modifier = {
				factor = 2
				has_trait = zealous
			}
			modifier = {
				factor = 0.5
				has_trait = cynical
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			stubborn = minor_stress_impact_loss
			zealous = major_stress_impact_loss
			cynical = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_pious }
		add_piety = medium_piety_gain
	}
	option = { # Commit pious suicide.
		name = ATHA_nickname.0144.b
		trait = lunatic_1
		trait = lunatic_genetic
		trigger = {
			OR = {
				faith = { has_doctrine_parameter = consolamentum_active }
				has_trait = lunatic_1
				has_trait = lunatic_genetic
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.1
				has_trait = craven
			}
			modifier = {
				factor = 1.25
				has_trait = humble
			}
			modifier = {
				factor = 1.1
				has_trait = impatient
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
		}
		# No point in stress if this character dies.

		hidden_effect = {
			add_piety_level = 1
		}
		set_permanent_nickname_effect = { NICKNAME = nick_the_pious }
		death = { death_reason = death_suicide }
		show_as_tooltip = {
			add_piety_level = 1
		}
	}
	option = { # Declare yourself a god.
		name = ATHA_nickname.0144.c
		trait = lunatic_1
		trait = lunatic_genetic
		trigger = {
			OR = {
				faith = faith:soterism_faith # TODO: Tie this to generic Apotheosis tenet.
				has_trait = lunatic_1
				has_trait = lunatic_genetic
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.5
				has_trait = craven
				NOT = { faith = faith:soterism_faith } # TODO: Tie this to generic Apotheosis tenet.
			}
			modifier = {
				factor = 0.5
				has_trait = content
			}
			modifier = {
				factor = 10
				has_trait = arrogant
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
				NOT = { faith = faith:soterism_faith } # TODO: Tie this to generic Apotheosis tenet.
			}
		}

		if = {
			limit = {
				NOT = { faith = faith:soterism_faith }
			}

			stress_impact = {
				lunatic_1 = major_stress_impact_loss
				lunatic_genetic = major_stress_impact_loss
				craven = medium_stress_impact_gain
				content = medium_stress_impact_gain
				arrogant = major_stress_impact_loss
				zealous = medium_stress_impact_gain
				cynical = minor_stress_impact_loss
				stubborn = minor_stress_impact_gain
			}

			add_character_modifier = {
				modifier = recent_deification_illegal_modifier
				years = 10
			}
		} else = {
			stress_impact = {
				lunatic_1 = major_stress_impact_loss
				lunatic_genetic = major_stress_impact_loss
				content = medium_stress_impact_gain
				arrogant = major_stress_impact_loss
				cynical = minor_stress_impact_loss
				stubborn = minor_stress_impact_gain
			}

			add_character_modifier = {
				modifier = recent_deification_modifier
				years = 5
			}
		}

		set_permanent_nickname_effect = { NICKNAME = nick_the_divine }
		add_trait = godlike
	}
	option = { # Focus on yourself.
		name = ATHA_nickname.0144.d
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = lustful
			}
			modifier = {
				factor = 1.25
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 1.25
				has_trait = greedy
			}
			modifier = {
				factor = 2
				has_trait = arrogant
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
			}
		}
		stress_impact = {
			base = minor_stress_impact_loss
			lustful = minor_stress_impact_loss
			lazy = minor_stress_impact_loss
			greedy = minor_stress_impact_loss
			arrogant = medium_stress_impact_loss
			zealous = major_stress_impact_gain
		}

		add_piety = major_piety_loss
		random_list = {
			1 = {
				modifier = {
					factor = 2
					has_trait = education_diplomacy
				}
				add_diplomacy_skill = 1
			}
			1 = {
				modifier = {
					factor = 2
					has_trait = education_martial
				}
				add_martial_skill = 1
			}
			1 = {
				modifier = {
					factor = 2
					has_trait = education_stewardship
				}
				add_stewardship_skill = 1
			}
			1 = {
				modifier = {
					factor = 2
					has_trait = education_intrigue
				}
				add_intrigue_skill = 1
			}
			1 = {
				modifier = {
					factor = 2
					has_trait = education_learning
				}
				add_learning_skill = 1
			}
			1 = {
				modifier = {
					factor = 2
					has_trait = education_martial_prowess
				}
				add_prowess_skill = 2
			}
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_hawk CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_pious CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_pious - Transition from epithet to nickname.
ATHA_nickname.0145 = {
	hidden = yes

	trigger = {
		can_get_nick_the_pious = yes
		has_nickname = epithet_the_pious
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_pious }
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = zealous
		}
		modifier = {
			factor = 1.1
			var:nick_the_pious_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_pious_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_pious_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_pious_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_pious_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_pious_weight > 100
		}
	}
}

# nick_the_poet - Bad
ATHA_nickname.0146 = { 
	type = character_event
	title = ATHA_nickname.0146.t
	desc = ATHA_nickname.0146.desc
	theme = party
	left_portrait = root
	right_portrait = scope:nickname_councillor

	trigger = {
		can_get_nick_the_poet_bad = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = poet
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_poet_bad }
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_councillor_effect = yes
		select_independent_ruler_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0146.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so of course I should be known for my bad poetry!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			depressed_1 = minor_stress_impact_loss
			depressed_genetic = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_poet_bad }
		add_prestige = medium_prestige_loss
	}
	option = { # Quit poetry.
		name = ATHA_nickname.0146.b
		custom_tooltip = ATHA_nickname_abandon_poetry_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = calm
			}
			modifier = {
				factor = 2
				has_trait = lazy
			}
			modifier = {
				factor = 1.5
				has_trait = impatient
			}
			modifier = {
				factor = 0.5
				has_trait = patient
			}
			modifier = {
				factor = 1.5
				has_trait = wrathful
			}
			modifier = {
				factor = 0.75
				has_trait = poet
			}
		}
		stress_impact = {
			calm = minor_stress_impact_gain
			lazy = medium_stress_impact_gain
			impatient = minor_stress_impact_loss
			wrathful = minor_stress_impact_loss
			patient = medium_stress_impact_gain
		}

		if = {
			limit = { has_trait = poet }

			remove_trait = poet
			add_stress = major_stress_impact_gain
		} else = {
			add_stress = medium_stress_impact_gain
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_poet_bad CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_poet_good CHANGE = nickname_weight_large_decrease }
	}
	option = { # Invite the actors to your court.
		name = ATHA_nickname.0146.c
		custom_tooltip = ATHA_nickname_invite_play_peaceful_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				OR = {
					has_trait = reveler_1
					has_trait = reveler_2
					has_trait = reveler_3
				}
			}
			modifier = {
				factor = 1.25
				has_trait = gregarious
			}
			modifier = {
				factor = 1.25
				has_trait = compassionate
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = stubborn
			}
			modifier = {
				factor = 0.75
				has_trait = paranoid
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
			modifier = {
				factor = 0
				has_trait = vengeful
			}
		}
		stress_impact = {
			reveler_1 = medium_stress_impact_loss
			reveler_2 = medium_stress_impact_loss
			reveler_3 = medium_stress_impact_loss
			compassionate = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			stubborn = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
			greedy = medium_stress_impact_gain
			vengeful = major_stress_impact_gain
		}

		add_gold = minor_gold_loss
		add_character_modifier = {
			modifier = nickname_can_take_a_joke_modifier
			years = 2
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_benefactor CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_medium_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
	option = { # Invite the actors to your court to make them dissapear.
		name = ATHA_nickname.0146.d
		custom_tooltip = ATHA_nickname_invite_play_sadistic_tt
		ai_chance = {
			base = 15

			modifier = {
				factor = 2
				has_trait = wrathful
			}
			modifier = {
				factor = 2
				has_trait = vengeful
			}
			modifier = {
				factor = 0.75
				has_trait = gregarious
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
		}
		stress_impact = {
			sadistic = minor_stress_impact_loss
			wrathful = minor_stress_impact_loss
			vengeful = medium_stress_impact_loss
			gregarious = minor_stress_impact_gain
			greedy = medium_stress_impact_gain
		}

		add_gold = minor_gold_loss
		add_dread = 5
		add_character_modifier = {
			modifier = nickname_mysterious_dissapearance_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_flayer CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_poet - Good
ATHA_nickname.0147 = { 
	type = character_event
	title = ATHA_nickname.0147.t
	desc = ATHA_nickname.0147.desc
	theme = party
	left_portrait = root

	trigger = {
		can_get_nick_the_poet_good = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = poet
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_poet_good }
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_two_independent_rulers_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0147.a
		ai_chance = {
			base = 10

			modifier = { # Likes being the center of attention.
				factor = 1.5
				has_trait = arrogant
			}
			modifier = { # Hates being the center of attention.
				factor = 0.5
				has_trait = shy
			}
			modifier = {
				factor = 2
				has_trait = poet
			}
			modifier = { # The world should be exposed to my poetry without price.
				factor = 1.5
				has_trait = generous
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_loss
			shy = medium_stress_impact_gain
			poet = major_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_poet_good }
		dynasty = { add_dynasty_prestige = medium_dynasty_prestige_gain }
	}
	option = { # Sell poetry for gold.
		name = ATHA_nickname.0147.b
		custom_tooltip = ATHA_nickname_sell_poems_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 2
				has_trait = greedy
			}
			modifier = {
				factor = 1.25
				has_trait = impatient
			}
			modifier = {
				factor = 0.5
				has_trait = generous
			}
		}
		stress_impact = {
			greedy = major_stress_impact_loss
			impatient = minor_stress_impact_loss
			generous = medium_stress_impact_gain
		}

		add_gold = medium_gold_value
		add_character_modifier = {
			modifier = nickname_selling_poems_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_poet_good CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_decrease }
	}
	option = { # Use poetry to pursue political goals.
		name = ATHA_nickname.0147.c
		custom_tooltip = ATHA_nickname_political_poems_tt
		ai_chance = {
			base = 10
			
			modifier = {
				factor = 2
				has_trait = ambitious
			}
			modifier = {
				factor = 1.5
				has_trait = diligent
			}
			modifier = {
				factor = 1.25
				has_trait = greedy
			}
			modifier = {
				factor = 0.5
				has_trait = humble
			}
			modifier = {
				factor = 1.25
				has_trait = impatient
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
		}
		stress_impact = {
			ambitious = major_stress_impact_loss
			diligent = medium_stress_impact_loss
			humble = medium_stress_impact_gain
			compassionate = medium_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_political_poems_modifier
			years = 5
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_hawk CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_saviour
# ATHA_nickname.0148 = {

# nick_the_saviour - Transition from epithet to nickname.
# ATHA_nickname.0149 = {

# nick_the_scholar
ATHA_nickname.0150 = {
	type = character_event
	title = ATHA_nickname.0150.t
	desc = ATHA_nickname.0150.desc
	theme = learning
	left_portrait = root

	trigger = {
		can_get_nick_the_scholar = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_capital_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = scholar
		}
		modifier = {
			factor = 1.1
			var:nick_the_scholar_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_scholar_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_scholar_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_scholar_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_scholar_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_scholar_weight > 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_scholar }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0150.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.9
				has_trait = fickle
			}
			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 2
				has_trait = scholar
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = minor_stress_impact_loss
			scholar = major_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_scholar }
		add_prestige = medium_prestige_gain
	}
	option = { # Humbly refuse.
		name = ATHA_nickname.0150.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_loss
			scholar = major_stress_impact_loss
		}

		add_piety = minor_piety_gain
		add_character_modifier = {
			modifier = nickname_humble_modifier
			years = 3
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
	option = { # Sell off the scholarly works.
		name = ATHA_nickname.0150.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 2
				has_trait = greedy
			}
			modifier = {
				factor = 1.1
				has_trait = deceitful
			}
			modifier = {
				factor = 1.25
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.1
				has_trait = impatient
			}
		}
		stress_impact = {
			greedy = major_stress_impact_loss
			arbitrary = minor_stress_impact_loss
			scholar = major_stress_impact_gain
			content = minor_stress_impact_gain
			generous = medium_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_empty_library_modifier
			years = 5
		}
		add_gold = major_gold_value

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_scholar CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_decrease }
	}
}

# nick_the_sibling_loving
# ATHA_nickname.0151 = {

# nick_the_sibling_loving - Transition from epithet to nickname.
# ATHA_nickname.0152 = {

# nick_the_small
scripted_trigger ATHA_nickname_0153_can_stay_at_court_base = {
	OR = {
		has_trait = dwarf
		is_close_family_of = root
		is_consort_of = root
		has_friendly_relationship_with_character_trigger = { CHARACTER = root }
	}
}

scripted_trigger ATHA_nickname_0153_can_stay_at_court = {
	OR = {
		ATHA_nickname_0153_can_stay_at_court_base = yes
		any_consort = {
			ATHA_nickname_0153_can_stay_at_court_base = yes
		}
	}
}

ATHA_nickname.0153 = {
	type = character_event
	title = ATHA_nickname.0153.t
	desc = ATHA_nickname.0153.desc
	theme = physical_health
	left_portrait = root

	trigger = {
		can_get_nick_the_small = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_two_independent_rulers_effect = yes

		create_character = {
			location = root.capital_province
			template = dwarf_character
			save_scope_as = dwarf_1
		}
		create_character = {
			location = root.capital_province
			template = dwarf_character
			save_scope_as = dwarf_2
		}
		create_character = {
			location = root.capital_province
			template = dwarf_character
			save_scope_as = dwarf_3
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0153.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.75
				has_trait = diligent # Diligent characters would rather be known for their achievements
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			diligent = minor_stress_impact_gain
			honest = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_small }
		add_prestige = major_prestige_loss

		hidden_effect = {
			scope:dwarf_1 = {
				death = { death_reason = death_vanished }
			}
			scope:dwarf_2 = {
				death = { death_reason = death_vanished }
			}
			scope:dwarf_3 = {
				death = { death_reason = death_vanished }
			}
		}
	}
	option = { # Throw out all non-dwarves from the court. Add a few dwarves for good measure.
		name = ATHA_nickname.0153.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.5
				has_trait = craven
			}
			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 0.5
				has_trait = calm
			}
			modifier = {
				factor = 1.1
				has_trait = lazy
			}
			modifier = {
				factor = 1.25
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = forgiving
			}
			modifier = {
				factor = 0.75
				has_trait = just
			}
			modifier = {
				factor = 1.1
				has_trait = impatient
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
			modifier = {
				factor = 0.9
				has_trait = compassionate
			}
			modifier = { # For shits and giggles.
				factor = 2
				has_trait = lunatic
			}
		}
		stress_impact = {
			base = major_stress_impact_gain
			wrathful = minor_stress_impact_loss
			calm = minor_stress_impact_gain
			vengeful = minor_stress_impact_loss
			forgiving = medium_stress_impact_gain
			just = minor_stress_impact_gain
			content = minor_stress_impact_gain
			lunatic_1 = major_stress_impact_loss
			lunatic_genetic = major_stress_impact_loss
		}

		every_courtier_or_guest = {
			custom = ATHA_nickname.0153.b_kicked_courtiers_tt
			limit = {
				NOT = { ATHA_nickname_0153_can_stay_at_court = yes }
			}

			custom_tooltip = ATHA_nickname.0153.b_kicking_from_court_tt
			hidden_effect = {
				select_and_move_to_pool_effect = yes
			}

			add_opinion = {
				modifier = kicked_me_from_court
				target = root
			}
		}

		add_courtier = scope:dwarf_1
		add_courtier = scope:dwarf_2
		add_courtier = scope:dwarf_3

		add_character_modifier = {
			modifier = nickname_dwarven_court_modifier
			years = 3
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_illustrious CHANGE = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_just CHANGE = nickname_weight_medium_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_medium_decrease }
	}
	option = { # Counter propaganda.
		name = ATHA_nickname.0153.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = generous
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
			modifier = {
				factor = 1.25
				has_trait = deceitful
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
		}
		stress_impact = {
			ambitious = minor_stress_impact_loss
			generous = minor_stress_impact_loss
			greedy = medium_stress_impact_gain
			honest = minor_stress_impact_gain
		}

		add_gold = minor_gold_loss

		hidden_effect = {
			scope:dwarf_1 = {
				death = { death_reason = death_vanished }
			}
			scope:dwarf_2 = {
				death = { death_reason = death_vanished }
			}
			scope:dwarf_3 = {
				death = { death_reason = death_vanished }
			}
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_benefactor CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_smelly
ATHA_nickname.0154 = {
	type = character_event
	title = ATHA_nickname.0154.t
	desc = ATHA_nickname.0154.desc
	theme = unfriendly
	override_background = { event_background = terrain }
	left_portrait = root

	trigger = {
		can_get_nick_the_smelly = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_councillor_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = lazy
		}
		modifier = {
			factor = 1.1
			var:nick_the_smelly_weight > 5
		}
		modifier = {
			factor = 1.2
			var:nick_the_smelly_weight > 10
		}
		modifier = {
			factor = 1.3
			var:nick_the_smelly_weight > 15
		}
		modifier = {
			factor = 1.4
			var:nick_the_smelly_weight > 20
		}
		modifier = {
			factor = 1.5
			var:nick_the_smelly_weight > 25
		}
		modifier = {
			factor = 2
			var:nick_the_smelly_weight > 30
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_smelly }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0154.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = sadistic
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			arrogant = major_stress_impact_gain
			compassionate = minor_stress_impact_gain
			sadistic = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_smelly }
		add_prestige = medium_prestige_loss
	}
	option = { # Stop exercising.
		name = ATHA_nickname.0154.b
		trigger = { has_trait = athletic }
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = diligent
			}
			modifier = {
				factor = 2
				has_trait = lazy
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
		}
		stress_impact = {
			base = medium_stress_impact_gain
			diligent = minor_stress_impact_gain
			lazy = major_stress_impact_loss
			content = minor_stress_impact_gain
		}

		remove_trait = athletic
		add_prestige = medium_prestige_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_decrease }
	}
	option = { # Import Egyptian fragrances.
		name = ATHA_nickname.0154.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = lustful
			}
			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
		}
		stress_impact = {
			arrogant = minor_stress_impact_loss
			content = minor_stress_impact_gain
			greedy = medium_stress_impact_gain
		}

		add_gold = medium_gold_loss
		add_character_modifier = {
			modifier = nickname_egyptian_fragrances_modifier
			years = 2
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_thin
ATHA_nickname.0155 = {
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = { is_male = yes }
				desc = ATHA_nickname.0155.t_man
			}
			desc = ATHA_nickname.0155.t_woman
		}
	}
	desc = {
		desc = ATHA_nickname.0155.desc_opening
		first_valid = {
			triggered_desc = {
				trigger = { has_trait = spindly }
				desc = ATHA_nickname.0155.desc_middle_spindly
			}
			desc = ATHA_nickname.0155.desc_middle_skinny
		}
		desc = ATHA_nickname.0155.desc_ending
	}
	theme = physical_health
	left_portrait = root

	trigger = {
		can_get_nick_the_thin = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_councillor_effect = yes
		select_nickname_physician_effect = yes
	}

	weight_multiplier = {
		base = 0.5

		modifier = {
			factor = 2
			has_trait = spindly
		}
		modifier = {
			factor = 2
			has_character_modifier = malnourished_modifier
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_thin }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0155.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			inappetetic = medium_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_thin }
		add_prestige = medium_prestige_loss
	}
	option = { # Try to get a doctor to fix me.
		name = {
			trigger = { has_trait = lunatic }
			text = ATHA_nickname.0155.b_easter_egg
		}
		name = {
			trigger = {
				NOT = { has_trait = lunatic }
			}
			text = ATHA_nickname.0155.b_regular
		}
		if = {
			limit = { has_trait = lunatic }
			custom_tooltip = ATHA_nickname.0155.b_easter_egg_tt
		} else = {
			custom_tooltip = ATHA_nickname.0155.b_regular_tt
		}
		trigger = {
			exists = scope:nickname_physician
			has_trait = spindly
		}
		trait = spindly
		ai_chance = {
			base = 5 # AI less likely to perform dangerous surgeries.

			modifier = {
				factor = 1.25
				has_trait = brave
			}
			modifier = {
				factor = 0.75
				has_trait = craven
			}
			modifier = {
				factor = 0.5
				has_trait = paranoid # Doesn't trust a doctor.
			}
			modifier = {
				factor = 1.25
				has_trait = trusting
			}
			modifier = {
				factor = 1.25
				has_trait = education_learning
			}
			modifier = {
				factor = 0.75
				has_trait = greedy
			}
		}
		stress_impact = {
			craven = minor_stress_impact_gain
			paranoid = medium_stress_impact_gain
			greedy = minor_stress_impact_gain
			trusting = minor_stress_impact_loss
		}
		random_list = {
			5 = {
				modifier = {
					factor = 0.5
					scope:nickname_physician = { learning <= low_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= mediocre_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= medium_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= decent_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= very_high_skill_rating }
				}
				modifier = {
					factor = 1.1
					scope:nickname_physician = { learning >= extremely_high_skill_rating }
				}
				modifier = {
					factor = 1.5
					scope:nickname_physician = { has_trait = physician_2 }
				}
				modifier = {
					factor = 2
					scope:nickname_physician = { has_trait = physician_3 }
				}
				remove_trait = spindly
			}
			10 = {
				custom_tooltip = ATHA_nickname.0155.b_death_tt
				hidden_effect = {
					death = {
						death_reason = death_treatment
						killer = scope:nickname_physician
					}
				}
			}
			10 = { }
		}

		add_gold = minor_gold_loss
		add_prestige = minor_prestige_loss

		change_nickname_weight_effect = { NICKNAME = nick_the_bold CHANGE = nickname_weight_medium_increase }
	}
	option = { # Go into bulking mode.
		name = ATHA_nickname.0155.c
		trigger = {
			NOT = { has_trait = spindly }
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = lustful
			}
			modifier = {
				factor = 0.9
				has_trait = chaste
			}
			modifier = {
				factor = 1.25
				has_trait = education_martial
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 0.75
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
			modifier = {
				factor = 0.75
				has_trait = impatient
			}
			modifier = {
				factor = 1.5
				has_trait = gluttonous
			}
			modifier = {
				factor = 0.75
				has_trait = temperate
			}
		}
		stress_impact = {
			lazy = medium_stress_impact_gain
			impatient = minor_stress_impact_gain
			gluttonous = medium_stress_impact_loss
			temperate = minor_stress_impact_loss
			inappetetic = major_stress_impact_gain
		}

		add_prestige = minor_prestige_loss

		custom_tooltip = ATHA_nickname.0155.c_gain_weight_tt
		hidden_effect = {
			add_character_modifier = {
				modifier = gaining_weight_modifier
			}
	
			trigger_event = { #To give faster, and steadier, results
				id = health.5004
				days = 90
			}
		}

		random = {
			chance = 10
			modifier = {
				factor = 0.5
				has_trait = lazy
			}
			modifier = {
				factor = 2
				has_trait = diligent
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}

			add_trait = athletic
		}
	}
}

# nick_the_ugly
ATHA_nickname.0156 = {
	type = character_event
	title = ATHA_nickname.0156.t
	desc = ATHA_nickname.0156.desc
	theme = unfriendly
	left_portrait = root

	trigger = {
		can_get_nick_the_ugly = yes
	}

	weight_multiplier = {
		base = 0.5 # If you just have the minor ugliness genetic trait, this will be less likely to happen.

		modifier = {
			factor = 2
			has_trait = beauty_bad_2
		}
		modifier = {
			factor = 4
			has_trait = beauty_bad_3
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_ugly }
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		random_held_title = {
			limit = {
				tier = tier_county
			}

			add_to_list = statue_counties
		}
		random_held_title = {
			limit = {
				tier = tier_county
				NOT = { is_in_list = statue_counties }
			}

			add_to_list = statue_counties
		}
		random_held_title = {
			limit = {
				tier = tier_county
				NOT = { is_in_list = statue_counties }
			}

			add_to_list = statue_counties
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0156.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
		}
		stress_impact = {
			base = minor_stress_impact_gain
			content = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = major_stress_impact_gain
			wrathful = minor_stress_impact_gain
			vengeful = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_ugly }
		add_prestige = medium_prestige_loss
	}
	option = { # Become celibate.
		name = ATHA_nickname.0156.b
		trigger = { # Must be able to become celibate.	
			NOR = {
				has_trait = lifestyle_reveler
				has_trait = seducer
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = wrathful # Ragequit.
			}
			modifier = {
				factor = 1.1
				has_trait = chaste
			}
			modifier = {
				factor = 0.5
				has_trait = lustful
			}
			modifier = {
				factor = 1.1
				has_trait = impatient
			}
			modifier = {
				factor = 1.5
				has_trait = zealous
				NOT = {
					faith = { has_doctrine = tenet_carnal_exaltation }
				}
			}
			modifier = {
				factor = 0.5
				any_child = { count = 0 }
			}
		}
		if = {
			limit = {
				faith = { has_doctrine = tenet_carnal_exaltation }
			}

			stress_impact = {
				content = minor_stress_impact_gain
				lustful = medium_stress_impact_gain
				zealous = major_stress_impact_loss
				wrathful = minor_stress_impact_loss
			}
		} else = {
			stress_impact = {
				content = minor_stress_impact_gain
				lustful = medium_stress_impact_gain
				zealous = minor_stress_impact_gain
				wrathful = minor_stress_impact_loss
			}
			add_piety = major_piety_gain
		}

		add_prestige = minor_prestige_loss
		add_trait = celibate

		change_nickname_weight_effect = { NICKNAME = nick_the_pious CHANGE = nickname_weight_medium_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_decrease }
	}
	option = { # Threaten them.
		name = ATHA_nickname.0156.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = forgiving
			}
			modifier = {
				factor = 0.75
				has_trait = just
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = sadistic
			}
		}
		stress_impact = {
			wrathful = minor_stress_impact_loss
			vengeful = medium_stress_impact_loss
			forgiving = medium_stress_impact_gain
			just = minor_stress_impact_loss
			compassionate = medium_stress_impact_gain
			sadistic = minor_stress_impact_loss
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_air_of_dread_modifier
			years = 3
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_decrease }
	}
	option = { # Propagandize.
		name = ATHA_nickname.0156.d
		custom_tooltip = ATHA_nickname.0156.d_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = lazy
			}
			modifier = {
				factor = 1.25
				has_trait = generous
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
			modifier = {
				factor = 1.25
				has_trait = deceitful
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = paranoid # Does not trust the artists to do a good job.
			}
		}
		stress_impact = {
			generous = minor_stress_impact_loss
			greedy = medium_stress_impact_gain
			arrogant = minor_stress_impact_loss
			paranoid = minor_stress_impact_gain
			honest = medium_stress_impact_gain
		}

		remove_short_term_gold = medium_gold_value
		every_in_list = {
			list = statue_counties
			title_province = {
				add_province_modifier = {
					modifier = nickname_county_ruler_statue_modifier
					years = 15
				}
			}
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_benefactor CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_untimely
# ATHA_nickname.0157 = {

# nick_the_victor
ATHA_nickname.0158 = {
	type = character_event
	title = ATHA_nickname.0158.t
	desc = ATHA_nickname.0158.desc
	theme = war
	left_portrait = root

	trigger = {
		can_get_nick_the_victor = yes
		NOT = { has_nickname = epithet_the_victor }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_victor }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0158.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = brave
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = ambitious
			}
			modifier = {
				factor = 2
				has_trait = arrogant
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}
		}
		stress_impact = {
			brave = minor_stress_impact_loss
			content = minor_stress_impact_loss
			ambitious = medium_stress_impact_loss
			arrogant = medium_stress_impact_loss
			humble = major_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_victor }
		add_prestige = medium_prestige_gain
	}
	option = { # Humbly refuse.
		name = ATHA_nickname.0158.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = craven # What if I will be expected to lead the armies myself?!
			}
			modifier = {
				factor = 1.25
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = compassionate
			}
		}
		stress_impact = {
			humble = medium_stress_impact_loss
			compassionate = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			brave = minor_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_humble_modifier
			years = 5
		}
		add_piety = medium_piety_gain

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_victor - Transition from epithet to nickname.
ATHA_nickname.0159 = {
	hidden = yes

	trigger = {
		can_get_nick_the_victor = yes
		has_nickname = epithet_the_victor
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_victor }
	}
}

# nick_the_victorious
ATHA_nickname.0160 = {
	type = character_event
	title = ATHA_nickname.0160.t
	desc = ATHA_nickname.0160.desc
	theme = battle
	left_portrait = root

	trigger = {
		can_get_nick_the_victorious = yes
		NOT = { has_nickname = epithet_the_victorious }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1
		
		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_victorious }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0160.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = brave
			}
			modifier = {
				factor = 0.9
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = education_martial
			}
		}
		stress_impact = {
			brave = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = minor_stress_impact_loss
			compassionate = minor_stress_impact_gain
			education_martial_1 = minor_stress_impact_loss
			education_martial_2 = minor_stress_impact_loss
			education_martial_3 = minor_stress_impact_loss
			education_martial_4 = minor_stress_impact_loss
			content = minor_stress_impact_gain
			humble = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_victorious }
		add_prestige = medium_prestige_gain
	}
	option = { # Humbly refuse.
		name = ATHA_nickname.0160.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
		}
		stress_impact = {
			calm = minor_stress_impact_loss
			content = minor_stress_impact_loss
			humble = medium_stress_impact_loss
			brave = minor_stress_impact_gain
			arrogant = medium_stress_impact_gain
			education_martial_1 = minor_stress_impact_gain
			education_martial_2 = minor_stress_impact_gain
			education_martial_3 = minor_stress_impact_gain
			education_martial_4 = minor_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_humble_in_victory_modifier
			years = 5
		}
		add_prestige = medium_prestige_gain

		if = {
			limit = { has_trait = arrogant }
			add_trait = arrogant
		} else_if = {
			limit = {
				NOT = { has_trait = humble }
			}

			random = {
				chance = 10
				add_trait = humble
			}
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_victorious - Transition from epithet to nickname.
ATHA_nickname.0161 = {
	hidden = yes

	trigger = {
		can_get_nick_the_victorious = yes
		has_nickname = epithet_the_victorious
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_victorious }
	}
}

# nick_the_wealthy
ATHA_nickname.0162 = {
	type = character_event
	title = ATHA_nickname.0162.t
	desc = ATHA_nickname.0162.desc
	theme = stewardship
	left_portrait = root

	trigger = {
		can_get_nick_the_wealthy = yes
		NOT = { has_nickname = epithet_the_wealthy }
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		random_held_title = {
			limit = { tier = tier_county }

			add_to_list = invested_counties
		}
		random_held_title = {
			limit = {
				tier = tier_county
				NOT = { is_in_list = invested_counties }
			}

			add_to_list = invested_counties
		}
		random_held_title = {
			limit = {
				tier = tier_county
				NOT = { is_in_list = invested_counties }
			}

			add_to_list = invested_counties
		}
		random_held_title = {
			limit = {
				tier = tier_county
				NOT = { is_in_list = invested_counties }
			}

			add_to_list = invested_counties
		}
	}

	weight_multiplier = {
		base = 0.5

		# Increased chance if very wealthy.
		modifier = {
			factor = 1.2
			gold >= 10_years_gold_value
		}
		modifier = {
			factor = 1.2
			gold >= 15_years_gold_value
		}
		modifier = {
			factor = 1.2
			gold >= 20_years_gold_value
		}
		modifier = {
			factor = 1.4
			gold >= 30_years_gold_value
		}
		modifier = {
			factor = 1.2
			gold >= 35_years_gold_value
		}
		modifier = {
			factor = 1.2
			gold >= 40_years_gold_value
		}
		modifier = {
			factor = 1.2
			gold >= 45_years_gold_value
		}
		modifier = {
			factor = 1.2
			gold >= 50_years_gold_value
		}

		# Increased chance if there is a historical pattern of heavy spending and they are STILL wealthy.
		modifier = {
			factor = 1.1
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 30
		}
		modifier = {
			factor = 1.1
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 40
		}
		modifier = {
			factor = 1.1
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 50
		}
		modifier = {
			factor = 1.1
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 60
		}
		modifier = {
			factor = 1.1
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 70
		}
		modifier = {
			factor = 1.1
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 80
		}
		modifier = {
			factor = 1.1
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 90
		}
		modifier = {
			factor = 1.5
			has_variable = nickname_the_wealthy_weight
			var:nickname_the_wealthy_weight >= 100
		}

		# Decreased chance if ancestors had the same nickname.
		modifier = {
			factor = 0.25
			did_ancestors_have_nickname = { NICKNAME = nick_the_wealthy }
		}
	}

	option = { # Accept the nickname.
		name = {
			trigger = { has_trait = greedy }
			text = ATHA_nickname.0162.a_greedy
		}
		name = {
			trigger = {
				NOT = { has_trait = greedy }
			}
			text = ATHA_nickname.0162.a_regular
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = greedy
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 0.5
				has_trait = paranoid # Makes me a more likely target for villainy!
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			ambitious = minor_stress_impact_loss
			greedy = minor_stress_impact_loss
			arrogant = minor_stress_impact_loss
			paranoid = major_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_wealthy }
		add_prestige = medium_prestige_gain
	}
	option = { # Invest in realm.
		name = ATHA_nickname.0162.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = lazy
			}
			modifier = {
				factor = 2
				has_trait = generous
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = {
				factor = 1.25
				has_trait = compassionate
			}
			modifier = {
				factor = 0.5
				OR = {
					has_trait = callous
					has_trait = sadistic
				}
			}
		}
		stress_impact = {
			generous = major_stress_impact_loss
			greedy = major_stress_impact_gain
			humble = medium_stress_impact_loss
			arrogant = medium_stress_impact_gain
			compassionate = minor_stress_impact_loss
		}

		remove_short_term_gold = massive_gold_value
		add_prestige = medium_prestige_gain
		every_in_list = {
			list = invested_counties
			title_province = {
				add_province_modifier = {
					modifier = nickname_county_provincial_investment_modifier
					years = 10
				}
			}
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_benefactor CHANGE = nickname_weight_medium_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_increase }
		change_nickname_weight_effect = { NICKNAME = nick_the_wealthy CHANGE = nickname_weight_small_increase }
	}
}

# nick_the_wealthy - Transition from epithet to nickname.
ATHA_nickname.0163 = {
	hidden = yes

	trigger = {
		can_get_nick_the_wealthy = yes
		has_nickname = epithet_the_wealthy
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_wealthy }
	}
}

# nick_the_well_born
# ATHA_nickname.0164 = {

# nick_the_well_born - Transition from epithet to nickname.
# ATHA_nickname.0165 = {

# nick_the_wise
# ATHA_nickname.0166 = {

# Add 1 battle win to the battle counter.
ATHA_nickname.0300 = {
	scope = combat_side
	hidden = yes

	immediate = {
		side_commander = { register_battle_win_effect = yes }
	}
}

# Add 1 battle loss to the battle counter.
ATHA_nickname.0301 = {
	scope = combat_side
	hidden = yes

	immediate = {
		side_commander = { register_battle_loss_effect = yes }
	}
}

# Intermediate event for nick_the_eagle.
ATHA_nickname.0302 = {
	scope = combat_side
	hidden = yes

	trigger = {
		side_primary_participant = {
			can_get_nickname_trigger = yes
			can_get_nick_the_eagle = yes
		}

		exists = scope:wipe # The battle was a stackwipe.
	}

	immediate = {
		combat.location = { save_scope_as = combat_location }

		side_primary_participant = {
			trigger_event = { id = ATHA_nickname.0103 }
		}
	}
}

# Pass-through event for nick_the_short_lived assignment.
ATHA_nickname.0303 = {
	hidden = yes

	trigger = {
		scope:old_holder = {
			has_character_flag = nick_the_short_lived_enabled_flag
			NOT = { has_any_nickname = yes }
		}
		scope:title = {
			tier >= tier_kingdom
		}
	}

	immediate = {
		scope:title = {
			holder = { save_scope_as = new_holder }
		}

		scope:old_holder = {
			set_nickname_with_cooldown_effect = { NICKNAME = nick_the_short_lived }

			save_scope_as = nick_the_short_lived_receiver
			trigger_event = { id = ATHA_nickname.0107 }
		}
		scope:new_holder = {
			trigger_event = { id = ATHA_nickname.0107 }
		}
	}
}