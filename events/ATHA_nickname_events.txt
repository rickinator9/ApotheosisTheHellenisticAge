namespace = ATHA_nickname

# Assign an epithet to a ruler that can have an epithet when they succeed to an independent throne.
ATHA_nickname.0001 = {
	type = character_event
	title = ATHA_nickname.0001.t
	desc = ATHA_nickname.0001.desc
	theme = crown
	left_portrait = root

	trigger = {
		can_get_epithet_trigger = yes
		NOT = { has_character_flag = prompted_to_choose_epithet } # Prevent getting the event multiple times when inheriting a lot of titles.
	}

	immediate = {
		save_epithet_suggestion_effect = { OPTION = option1 }
		save_epithet_suggestion_effect = { OPTION = option2 }
		save_epithet_suggestion_effect = { OPTION = option3 }

		add_character_flag = prompted_to_choose_epithet

		# Councillor used in localisation.
		random_councillor = {
			save_scope_as = councillor
		}
	}

	option = {
		name = ATHA_nickname.0001.opt_the_asian
		trigger = {
			OR = {
				scope:option1 = flag:the_asian
				scope:option2 = flag:the_asian
				scope:option3 = flag:the_asian
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = greedy
			}
			modifier = {
				factor = 1.2
				has_trait = gregarious # Willing to show their acculturisation to others.
			}
			modifier = {
				factor = 1.2
				OR = {
					has_trait = education_diplomacy
					has_trait = education_learning
				}
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					has_nickname = epithet_the_asian
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_asian }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_autocrat
		trigger = {
			OR = {
				scope:option1 = flag:the_autocrat
				scope:option2 = flag:the_autocrat
				scope:option3 = flag:the_autocrat
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.3
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.05
				has_trait = greedy
			}
			modifier = {
				factor = 1.2
				has_trait = education_stewardship
			}
			modifier = {
				factor = 1.1
				has_trait = august
			}
			modifier = {
				factor = 1.1
				has_trait = overseer
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_autocrat
						has_nickname = nick_the_autocrat
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_autocrat }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_victorious
		trigger = {
			OR = {
				scope:option1 = flag:the_victorious
				scope:option2 = flag:the_victorious
				scope:option3 = flag:the_victorious
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.05
				has_trait = wrathful
			}
			modifier = {
				factor = 1.05
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.1
				has_trait = strategist
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_victorious
						has_nickname = nick_the_victorious
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_victorious }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_beautifully_triumphant
		trigger = {
			OR = {
				scope:option1 = flag:the_beautifully_triumphant
				scope:option2 = flag:the_beautifully_triumphant
				scope:option3 = flag:the_beautifully_triumphant
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.05
				has_trait = wrathful
			}
			modifier = {
				factor = 1.05
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.1
				has_trait = august
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_beautifully_triumphant
						has_nickname = nick_the_beautifully_triumphant
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_beautifully_triumphant }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_benefactor
		trigger = {
			OR = {
				scope:option1 = flag:the_benefactor
				scope:option2 = flag:the_benefactor
				scope:option3 = flag:the_benefactor
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.2
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.05
				has_trait = overseer
			}
			modifier = {
				factor = 1.05
				has_trait = administrator
			}
			modifier = {
				factor = 1.1
				has_trait = architect
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_benefactor
						has_nickname = nick_the_benefactor
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_benefactor }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_divine
		trigger = {
			OR = {
				scope:option1 = flag:the_divine
				scope:option2 = flag:the_divine
				scope:option3 = flag:the_divine
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
			}
			modifier = {
				factor = 1.2
				has_trait = education_learning
			}
			modifier = { # Religions that do not allow people to be deified should not choose this as a title, unless ROOT is insane of course!
				factor = 0
				NOR = {
					has_trait = lunatic_1
					has_trait = lunatic_genetic
					faith = faith:alexandrian_faith # TODO: Tie this to a tenet once we have a Apotheosis tenet.
					faith = faith:soterism_faith
				}
			}
			modifier = {
				factor = 1.5
				num_virtuous_traits >= 3
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_divine
						has_nickname = nick_the_divine
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_divine }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_divine_manifest
		trigger = {
			OR = {
				scope:option1 = flag:the_divine_manifest
				scope:option2 = flag:the_divine_manifest
				scope:option3 = flag:the_divine_manifest
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
			}
			modifier = {
				factor = 1.2
				has_trait = education_learning
			}
			modifier = { # Religions that do not allow people to be deified should not choose this as a title, unless ROOT is insane of course!
				factor = 0
				NOR = {
					has_trait = lunatic_1
					has_trait = lunatic_genetic
					faith = faith:alexandrian_faith # TODO: Tie this to a tenet once we have a Apotheosis tenet.
					faith = faith:soterism_faith
				}
			}
			modifier = {
				factor = 1.5
				num_virtuous_traits >= 3
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					has_nickname = epithet_the_divine_manifest
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_divine_manifest }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_father_loving
		trigger = {
			OR = {
				scope:option1 = flag:the_father_loving
				scope:option2 = flag:the_father_loving
				scope:option3 = flag:the_father_loving
			}
		}
		ai_chance = {
			base = 10

			modifier = { # These familial nicknames were very common in the Greek world.
				factor = 1.5
				uses_greek_for_nickname_localization_trigger = yes
			}
			modifier = { # The character had exceedingly positive relations with their father.
				factor = 1.5
				OR = {
					has_relation_friend = father
					has_relation_best_friend = father
					has_relation_lover = father
					has_relation_soulmate = father
				}
			}
			modifier = { # Will never assume this epithet if this character had exceedingly bad relations with their father or if they are deceitful.
				factor = 0
				NOT = { has_trait = deceitful }
				OR = {
					has_relation_rival = father
					has_relation_nemesis = father
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious # More likely to establish family ties.
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.2
				has_trait = family_first
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_father_loving
						has_nickname = nick_the_father_loving
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_father_loving }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_generous
		trigger = {
			OR = {
				scope:option1 = flag:the_generous
				scope:option2 = flag:the_generous
				scope:option3 = flag:the_generous 
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = generous
			}
			modifier = {
				factor = 1.2
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_generous
						has_nickname = nick_the_generous
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_generous }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_just
		trigger = {
			OR = {
				scope:option1 = flag:the_just
				scope:option2 = flag:the_just
				scope:option3 = flag:the_just
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.2
				has_trait = diligent
			}
			modifier = {
				factor = 1.05
				has_trait = generous
			}
			modifier = {
				factor = 1.05
				has_trait = gregarious
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = just
			}
			modifier = {
				factor = 1.2
				has_trait = education_stewardship
			}
			modifier = {
				factor = 1.05
				has_trait = administrator
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_just
						has_nickname = nick_the_just
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_just }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_mother_loving
		trigger = {
			OR = {
				scope:option1 = flag:the_mother_loving
				scope:option2 = flag:the_mother_loving
				scope:option3 = flag:the_mother_loving
			}
		}
		ai_chance = {
			base = 10

			modifier = { # These familial nicknames were very common in the Greek world.
				factor = 1.5
				uses_greek_for_nickname_localization_trigger = yes
			}
			modifier = { # The character had exceedingly positive relations with their mother.
				factor = 1.5
				OR = {
					has_relation_friend = mother
					has_relation_best_friend = mother
					has_relation_lover = mother
					has_relation_soulmate = mother
				}
			}
			modifier = { # Will never assume this epithet if this character had exceedingly bad relations with their mother or if they are deceitful.
				factor = 0
				NOT = { has_trait = deceitful }
				OR = {
					has_relation_rival = mother
					has_relation_nemesis = mother
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious # More likely to establish family ties.
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.2
				has_trait = family_first
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_mother_loving
						has_nickname = nick_the_mother_loving
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_mother_loving }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_pious
		trigger = {
			OR = {
				scope:option1 = flag:the_pious
				scope:option2 = flag:the_pious
				scope:option3 = flag:the_pious
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = zealous
			}
			modifier = {
				factor = 1.2
				has_trait = education_learning
			}
			modifier = {
				factor = 1.2
				has_trait = theologian
			}
			modifier = {
				factor = 1.25
				num_virtuous_traits >= 1
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_pious
						has_nickname = nick_the_pious
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_pious }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_saviour
		trigger = {
			OR = {
				scope:option1 = flag:the_saviour
				scope:option2 = flag:the_saviour
				scope:option3 = flag:the_saviour
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.2
				has_trait = wrathful # Sort of a slight xenophobic behavior.
			}
			modifier = {
				factor = 1.1
				has_trait = arrogant # Arrogant people likely hate barbarians.
			}
			modifier = {
				factor = 1.1
				has_trait = zealous # Those barbs probably have a different faith, otherwise they wouldn't be barbs.
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.05
				has_trait = theologian
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_saviour
						has_nickname = nick_the_saviour
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_saviour }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_sibling_loving
		trigger = {
			OR = {
				scope:option1 = flag:the_sibling_loving
				scope:option2 = flag:the_sibling_loving
				scope:option3 = flag:the_sibling_loving
			}
		}
		ai_chance = {
			base = 10

			modifier = { # These familial nicknames were very common in the Greek world.
				factor = 1.5
				uses_greek_for_nickname_localization_trigger = yes
			}
			modifier = { # The character had exceedingly positive relations with one of their siblings.
				factor = 1.5
				any_sibling = {
					OR = {
						has_relation_friend = root
						has_relation_best_friend = root
						has_relation_lover = root
						has_relation_soulmate = root
					}
				}
			}
			modifier = { # Will never assume this epithet if this character had exceedingly bad relations with one of their siblings or if they are deceitful.
				factor = 0
				NOT = { has_trait = deceitful }
				any_sibling = {
					OR = {
						has_relation_rival = root
						has_relation_nemesis = root
					}
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious # More likely to establish family ties.
			}
			modifier = {
				factor = 1.1
				has_trait = compassionate
			}
			modifier = {
				factor = 1.2
				has_trait = education_diplomacy
			}
			modifier = {
				factor = 1.2
				has_trait = family_first
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_sibling_loving
						has_nickname = nick_the_sibling_loving
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_sibling_loving }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_victor
		trigger = {
			OR = {
				scope:option1 = flag:the_victor
				scope:option2 = flag:the_victor
				scope:option3 = flag:the_victor
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = brave
			}
			modifier = {
				factor = 1.05
				has_trait = wrathful
			}
			modifier = {
				factor = 1.05
				has_trait = ambitious
			}
			modifier = {
				factor = 1.2
				has_trait = education_martial
			}
			modifier = {
				factor = 1.1
				has_trait = strategist
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_victor
						has_nickname = nick_the_victor
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_victor }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_wealthy
		trigger = {
			OR = {
				scope:option1 = flag:the_wealthy
				scope:option2 = flag:the_wealthy
				scope:option3 = flag:the_wealthy
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = greedy
			}
			modifier = {
				factor = 1.2
				has_trait = education_stewardship
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_wealthy
						has_nickname = nick_the_wealthy
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_wealthy }
	}

	option = {
		name = ATHA_nickname.0001.opt_the_well_born
		trigger = {
			OR = {
				scope:option1 = flag:the_well_born
				scope:option2 = flag:the_well_born
				scope:option3 = flag:the_well_born
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.2
				has_trait = education_intrigue
			}
			modifier = { # If they have good genetic traits and are arrogant, they will certainly want to showcase this to the world.
				factor = 1.5
				has_trait = arrogant
				num_of_good_genetic_traits > 0
			}
			modifier = { # This character's ancestors used this particular nickname.
				factor = 1.2
				any_close_family_member = {
					OR = {
						is_parent_of = root
						is_grandparent_of = root
						is_great_grandparent_of = root
					}
					OR = {
						has_nickname = epithet_the_well_born
						has_nickname = nick_the_well_born
					}
				}
			}
		}

		set_epithet_effect = { EPITHET = epithet_the_well_born }
	}

	option = {
		name = ATHA_nickname.0001.opt_no_epithet
		ai_chance = {
			base = 0 # AI should never pick this unless any of the traits are applicable.

			modifier = {
				add = 10
				has_trait = content # Doesn't care about an epithet.
			}
			modifier = {
				add = 5
				has_trait = fickle # Can't choose between the others.
			}
			modifier = {
				add = 5
				has_trait = humble # May see an epithet as unnecessary.
			}
			modifier = { # They hate themselves, so do they really deserve an epithet?
				add = 5
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
			modifier = {
				add = 10
				has_trait = bastard_founder
			}
		}
		add_character_flag = refused_epithet
	}
}

#### NICKNAMES ####

scripted_effect select_nickname_county_effect = {
	random_held_title = { # Used in localization.
		limit = { tier = tier_county }

		save_scope_as = nickname_county
	}
}

scripted_effect select_nickname_capital_effect = {
	capital_province = {
		county = {
			save_scope_as = nickname_county
		}
		barony = {
			save_scope_as = nickname_barony
		}
	}
}

scripted_effect select_nickname_councillor_effect = {
	random_councillor = { # Used in localization.
		save_scope_as = nickname_councillor
	}
}

scripted_effect select_nickname_knight_effect = {
	random_knight = {
		save_scope_as = nickname_knight
	}
}

scripted_effect select_nickname_ancestor_effect = {
	random_close_family_member = {
		even_if_dead = yes
		limit = {
			OR = {
				is_great_grandparent_of = root
				is_grandparent_of = root
			}
			OR = {
				AND = {
					is_female = yes
					root = { is_female = yes }
				}
				AND = {
					is_male = yes
					root = { is_male = yes }
				}
			}
			is_alive = no
		}
		alternative_limit = {
			OR = {
				is_great_grandparent_of = root
				is_grandparent_of = root
			}
			is_alive = no
		}
		alternative_limit = {
			is_parent_of = root
			OR = {
				AND = {
					is_female = yes
					root = { is_female = yes }
				}
				AND = {
					is_male = yes
					root = { is_male = yes }
				}
			}
			is_alive = no
		}
		alternative_limit = {
			is_parent_of = root
			is_alive = no
		}
		alternative_limit = {
			OR = {
				AND = {
					is_female = yes
					root = { is_female = yes }
				}
				AND = {
					is_male = yes
					root = { is_male = yes }
				}
			}
			is_alive = no
		}
		alternative_limit = {
			is_alive = no
		}

		save_scope_as = nickname_ancestor
	}
}

scripted_effect select_vassal_effect = {
	random_vassal = {
		limit = { # Select a vassal with a capital that is close.
			capital_province = {
				squared_distance = { target = root.capital_province value <= squared_distance_small } # Roughly the distance the size of Wales
			}
		}
		alternative_limit = { } # In crazy cases where the king does not have any vassals with capitals close by.

		save_scope_as = nickname_vassal
		capital_province = {
			barony = { save_scope_as = nickname_vassal_barony }
		}
	}
}

scripted_effect select_independent_ruler_effect = {
	random_independent_ruler = {
		limit = {
			NOT = { this = ROOT }
		}

		save_scope_as = nickname_other_ruler
		capital_province = {
			barony = { save_scope_as = nickname_other_ruler_barony }
			county = { save_scope_as = nickname_other_ruler_county }
		}
	}
}

scripted_effect select_two_independent_rulers_effect = {
	random_independent_ruler = {
		limit = {
			NOT = { this = ROOT }
		}

		save_scope_as = nickname_ruler_1
		capital_province = {
			barony = { save_scope_as = nickname_ruler_1_barony }
			county = { save_scope_as = nickname_ruler_1_county }
		}
	}
	random_independent_ruler = {
		limit = {
			NOR = {
				this = ROOT
				this = scope:nickname_ruler_1
			}
		}

		save_scope_as = nickname_ruler_2
		capital_province = {
			barony = { save_scope_as = nickname_ruler_2_barony }
			county = { save_scope_as = nickname_ruler_2_county }
		}
	}
}

scripted_effect prevent_nickname_by_county_bribe_effect = {
	remove_short_term_gold = medium_gold_value
	scope:nickname_county = {
		add_county_modifier = {
			modifier = nickname_county_bribe_modifier
			years = 1
		}
	}
}

scripted_effect prevent_nickname_by_county_deceit_effect = {
	add_prestige = major_prestige_loss
	add_character_modifier = {
		modifier = nickname_deceiver_modifier
		years = 2
	}
}

scripted_effect prevent_nickname_by_county_punishment_effect = {
	scope:nickname_county = {
		change_development_progress_with_overflow = -20
		add_county_modifier = {
			modifier = nickname_county_punishment_modifier
			years = 5
		}
	}
	add_dread = minor_dread_gain
	add_piety = medium_piety_loss
}

scripted_effect prevent_nickname_by_county_imprison_effect = {
	scope:nickname_county = {
		add_county_modifier = {
			modifier = nickname_county_imprison_modifier
			years = 5
		}
	}
	add_dread = minor_dread_gain
	add_piety = minor_piety_loss
}

# nick_the_bastard
ATHA_nickname.0100 = {
	type = character_event
	title = ATHA_nickname.0100.t
	desc = ATHA_nickname.0100.desc
	theme = crown
	override_background = { event_background = market }
	left_portrait = root

	trigger = {
		can_get_nick_the_bastard = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_county_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0100.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so of course I am a bastard!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
			modifier = { # Unlikely to admit to their disputed heritage.
				factor = 0.75
				has_trait = disputed_heritage
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			disputed_heritage = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_bastard }
		add_prestige_level = -1
	}
	option = { # Bribe them to not use it anymore.
		name = ATHA_nickname.0100.b
		custom_tooltip = ATHA_nickname_bribery_suppression_tt
		ai_chance = {
			base = 12

			modifier = {
				factor = 0.5
				has_trait = greedy
			}
			modifier = { # People who aren't generous will still be reluctant to let their gold go.
				factor = 0.9
				NOR = {
					has_trait = generous
					has_trait = greedy
				}
			}
		}
		stress_impact = {
			greedy = medium_stress_impact_gain
		}

		prevent_nickname_by_county_bribe_effect = yes
	}
	option = { # Punish them!
		name = ATHA_nickname.0100.c
		custom_tooltip = ATHA_nickname_violent_suppression_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			vengeful = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			sadistic = medium_stress_impact_loss
			paranoid = minor_stress_impact_loss
		}

		prevent_nickname_by_county_punishment_effect = yes
	}
}

# nick_the_clubfooted
ATHA_nickname.0101 = {
	type = character_event
	title = ATHA_nickname.0101.t
	desc = ATHA_nickname.0101.desc
	theme = crown
	left_portrait = root

	trigger = {
		can_get_nick_the_clubfooted = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_county_effect = yes
		select_nickname_councillor_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0101.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so it is fair for me to be known for my bad qualities!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_clubfooted }
		add_prestige = medium_prestige_loss

		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			depressed_1 = minor_stress_impact_loss
			depressed_genetic = minor_stress_impact_loss
		}
	}
	option = { # Spread lies.
		name = ATHA_nickname.0101.b
		custom_tooltip = ATHA_nickname_deceit_suppression_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = deceitful
				NOR = {
					has_trait = vengeful
					has_trait = sadistic
				}
			}
			modifier = { # Surely, they have to believe this!
				factor = 1.2
				has_trait = trusting
			}
			modifier = { # They make their own truths.
				factor = 1.1
				has_trait = arbitrary
			}
		}

		prevent_nickname_by_county_deceit_effect = yes
	}
	option = { # Punish them!
		name = ATHA_nickname.0101.c
		custom_tooltip = ATHA_nickname_violent_suppression_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			vengeful = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			sadistic = medium_stress_impact_loss
			paranoid = minor_stress_impact_loss
		}

		prevent_nickname_by_county_punishment_effect = yes
	}
}

# nick_the_dowry_bearer
# ATHA_nickname.0102 = {

# nick_the_eagle
# Triggered when winning a stackwipe victory through ATHA_nickname.0302.
ATHA_nickname.0103 = {
	type = character_event
	title = ATHA_nickname.0103.t
	desc = ATHA_nickname.0103.desc
	theme = battle
	left_portrait = root

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_knight_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0103.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = brave
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			arrogant = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_eagle }
		add_prestige = medium_prestige_gain
	}

	option = { # Reject the nickname.
		name = ATHA_nickname.0103.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 0.75
				has_trait = wrathful
			}
			modifier = {
				factor = 0.75
				has_trait = vengeful
			}
			modifier = {
				factor = 0.75
				has_trait = sadistic
			}
			modifier = {
				factor = 1.25
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = forgiving
			}
		}
		stress_impact = {
			content = minor_stress_impact_loss
			wrathful = minor_stress_impact_loss
			vengeful = minor_stress_impact_loss
			sadistic = minor_stress_impact_loss
			compassionate = minor_stress_impact_loss
			forgiving = minor_stress_impact_loss
		}

		add_prestige = medium_prestige_loss
	}
}

# nick_the_fair
ATHA_nickname.0104 = {
	type = character_event
	title = ATHA_nickname.0104.t
	desc = ATHA_nickname.0104.desc
	theme = feast_activity
	left_portrait = root
	right_portrait = scope:nickname_vassal

	trigger = {
		can_get_nick_the_fair = yes

		# Additional requirements not included in the general trigger (to prevent the system from revoking the nickname):
		NOT = { has_trait = leper }
	}

	weight_multiplier = {
		base = 1

		modifier = { # This character is flawless in both face and body.
			factor = 10
			is_flawlessly_attractive_character_trigger = yes
		}
		modifier = { # This character has additional muscle tone on their already attractive body.
			factor = 2
			has_attractive_body_trigger = yes
			has_trait = strong
		}
		modifier = { # Missing an eye will make a character's face less attractive.
			factor = 0.75
			has_attractive_face_trigger = yes
			has_trait = one_eyed
		}
		modifier = { # Albinoism may be found unattractive by many.
			factor = 0.75
			has_trait = albino # Not specific to face only, as it may also create awkward situations of having a whiter skin among dark-skinned/tanned populations.
		}
		modifier = { # Obesity can make faces lose definition.
			factor = 0.5
			has_character_modifier = obese_modifier
		}
		modifier = { # The boils can be quite unsightly.
			factor = 0.5
			has_trait = lovers_pox
		}

		# Becomes less likely with age.
		modifier = {
			factor = 0.5
			age >= 40
		}
		modifier = {
			factor = 0.5
			age >= 50
		}
		modifier = {
			factor = 0.5
			age >= 60
		}

		# Additional modifiers based on sexual success. The weight starts decently high as sex can be had with just the wife.
		modifier = {
			factor = 1.25
			trigger_if = {
				limit = { has_variable = nick_the_fair_weight }
				var:nick_the_fair_weight >= 30
			}
		}
		modifier = {
			factor = 1.25
			trigger_if = {
				limit = { has_variable = nick_the_fair_weight }
				var:nick_the_fair_weight >= 60
			}
		}
		modifier = {
			factor = 2
			trigger_if = {
				limit = { has_variable = nick_the_fair_weight }
				var:nick_the_fair_weight >= 100
			}
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_vassal_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0104.a
		ai_chance = {
			base = 10

			modifier = { # People who do not like intimacy may not appreciate being known as a catch worldwide.
				factor = 0.8
				has_trait = chaste
			}
			modifier = { # Lusty people, however...
				factor = 1.5
				OR = {
					has_trait = lustful
					has_trait = rakish
				}
			}
			modifier = { # Ambitious people will know that there are benefits to first impressions.
				factor = 1.1
				has_trait = ambitious
			}
			modifier = { # Shy people do not want much attention.
				factor = 0.75
				has_trait = shy
			}
			modifier = { # But may have to admit to the fact...
				factor = 1.25
				has_trait = honest
			}
			modifier = { # Humble people may not want to admit to their superior appearance.
				factor = 0.75
				has_trait = humble
			}
			modifier = { # Arrogant people will want to bask in it.
				factor = 3
				has_trait = arrogant
			}
			modifier = { # Paranoid people will know this could attract many who are envious.
				factor = 0.5
				has_trait = paranoid
			}
			modifier = { # A depressed person will never be able to believe it.
				factor = 0.5
				has_trait = depressed
			}
			modifier = { # A blind and depressed person will never be able to believe it.
				factor = 0.5
				has_trait = depressed
				has_trait = blind
			}
			modifier = { # Unless beauty or physique is a virtue, zealous people would like to be known for their religious efforts.
				factor = 0.75
				has_trait = zealous
				faith = { 
					OR = {
						trait_is_virtue = beauty_good
						trait_is_virtue = physique_good
					}
				}
			}
		}
		stress_impact = {
			lustful = medium_stress_impact_loss
			rakish = medium_stress_impact_loss
			shy = medium_stress_impact_gain
			honest = small_stress_impact_loss
			humble = medium_stress_impact_gain
			arrogant = major_stress_impact_loss
			paranoid = medium_stress_impact_gain
			depressed_1 = medium_stress_impact_gain
			depressed_genetic = medium_stress_impact_gain
		}
	
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_fair }
		add_prestige = medium_prestige_gain
		dynasty = { add_dynasty_prestige = medium_dynasty_prestige_gain }
	}
	option = { # Direct the attention onto the vassal instead. The vassal may perceive this as an insult.
		name = ATHA_nickname.0104.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 2
				has_trait = humble
			}
			modifier = { # Content to operate in the shadow of others.
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = { # A gregarious character will use this opportunity to improve their opinion among others, but will be tactful enough to not insult them.
				factor = 1.25
				has_trait = gregarious
			}
			modifier = { # If they have the necessary social skills to recognise that this would insult the vassal, they will almost never say it. Unless the vassal is a rival of course!
				factor = 0.25
				scope:nickname_vassal = { has_trait = beauty_bad }
				OR = {
					has_trait = gregarious
					has_trait = education_diplomacy_2
					has_trait = education_diplomacy_3
					has_trait = education_diplomacy_4
				}
				NOR = {
					has_relation_rival = scope:nickname_vassal
					has_relation_nemesis = scope:nickname_vassal
				}
			}
		}

		if = {
			limit = {
				scope:nickname_vassal = { has_trait = beauty_bad }
			}
			custom_tooltip = ATHA_nickname_sarcastic_insult_tt

			scope:nickname_vassal = {
				add_opinion = {
					modifier = insulted_opinion
					target = root
					years = 2
				}
			}

			# If one is insulting a rival, they will derive pleasure from that.
			if = {
				limit = {
					OR = {
						has_relation_rival = scope:nickname_vassal
						has_relation_nemesis = scope:nickname_vassal
					}
				}

				add_stress = medium_stress_loss
			}

			change_nickname_weight_effect = { NICKNAME = nick_the_cruel CHANGE = nickname_weight_small_increase }
		} else = {
			custom_tooltip = ATHA_nickname_humble_rejection_tt
			scope:nickname_vassal = {
				add_opinion = {
					modifier = compliment_opinion
					target = root
					opinion = 20
				}
			}
			add_character_modifier = {
				modifier = nickname_humble_modifier
				years = 5
			}

			change_nickname_weight_effect = { NICKNAME = nick_the_good CHANGE = nickname_weight_small_increase }
			change_nickname_weight_effect = { NICKNAME = nick_the_illustrous CHANGE = nickname_weight_small_increase }
			change_nickname_weight_effect = { NICKNAME = nick_the_well_born CHANGE = nickname_weight_small_increase }
		}

		stress_impact = {
			humble = major_stress_impact_loss
			content = small_stress_impact_loss
		}
	}
	option = { # Allude to the fateful demise of any previous conquests.
		name = ATHA_nickname.0104.c
		trigger = { has_trait = sadistic }
		custom_tooltip = ATHA_nickname_unspeakable_acts_tt
		ai_chance = {
			base = 0

			modifier = { # Does not like any conflict at all.
				factor = 0.5
				has_trait = craven
			}
			modifier = {
				factor = 2
				OR = {
					has_trait = lunatic
					has_trait = possessed
				}
			}
			modifier = { # A Weepy-Voiced Killer?
				factor = 1.5
				has_trait = contrite
			}
		}
		stress_impact = {
			craven = major_stress_impact_gain
			sadistic = major_stress_impact_loss
			contrite = medium_stress_impact_loss
		}

		trait = sadistic

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_skeletons_in_closet_modifier
			years = 5
		}
	}
	option = { # Loudly complain about the gathered crowd.
		name = ATHA_nickname.0104.d
		custom_tooltip = ATHA_nickname_inner_beauty_tt
		ai_chance = {
			base = 10

			modifier = { # Does not like any conflict at all.
				factor = 0.5
				has_trait = craven
			}
			modifier = { # Does not like to talk, especially to large crowds.
				factor = 0.5
				has_trait = shy
			}
			modifier = {
				factor = 1.1
				has_trait = wrathful
			}
			modifier = { # Arrogant people love basking in the attention.
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.8
				has_trait = calm
			}
			modifier = {
				factor = 0.75
				has_trait = compassionate
			}
			modifier = { # Less control over the self.
				factor = 1.2
				has_trait = drunkard
			}
			modifier = { # This is a Karen.
				factor = 2
				has_trait = irritable
			}
		}
		stress_impact = {
			shy = major_stress_impact_gain
			arrogant = major_stress_impact_gain
			compassionate = small_stress_impact_gain
			irritable = major_stress_impact_loss
		}

		add_prestige = medium_prestige_loss
	}
}

# nick_the_young - Initial event triggered by the death of the ruler.
ATHA_nickname.0105 = {
	hidden = yes

	trigger = {
		is_allowed_nickname_trigger = yes
		can_get_nick_the_young = yes
	}

	immediate = {
		save_scope_as = nick_the_young_receiver
		player_heir = {
			trigger_event = {
				id = ATHA_nickname.0106
				days = { 14 30 }
			}
		}
	}
}

# nick_the_young - Event for next heir.
ATHA_nickname.0106 = {
	type = character_event
	title = ATHA_nickname.0106.t
	desc = ATHA_nickname.0106.desc
	theme = skull
	left_portrait = root
	right_portrait = scope:nick_the_young_receiver

	immediate = {
		select_nickname_capital_effect = yes

		scope:nick_the_young_receiver = {
			set_permanent_nickname_effect = { NICKNAME = nick_the_young }
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0106.a
	}
}

# nick_the_short_lived
# ATHA_nickname.0107 = {

# nick_the_one_eyed
ATHA_nickname.0108 = {
	type = character_event
	title = ATHA_nickname.0108.t
	desc = ATHA_nickname.0108.desc
	theme = battle
	left_portrait = root

	trigger = {
		can_get_nick_the_one_eyed = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1
	}

	option = { # Accept the nickname (flagellant).
		name = ATHA_nickname.0108.a_flagellant
		trigger = {
			has_character_flag = put_out_own_eye
		}
		ai_chance = { # Proof of piety.
			base = 10

			modifier = {
				factor = 10
				has_trait = flagellant
			}
			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 2
				has_trait = zealous
			}
			modifier = {
				factor = 0.5
				has_trait = cynical
			}
		}
		stress_impact = {
			flagellant = massive_stress_impact_loss
			zealous = medium_stress_impact_loss
			cynical = medium_stress_impact_gain
		}
		trait = flagellant

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_one_eyed }
		add_piety = medium_piety_gain
	}
	option = { # Accept the nickname (non-flagellant).
		name = ATHA_nickname.0108.a
		trigger = {
			NOT = { has_character_flag = put_out_own_eye } 
		}
		ai_chance = { # Proof of bravery in battle.
			base = 10

			modifier = {
				factor = 2
				OR = {
					has_trait = brave
					AND = { # The character may want to adopt the nickname if it speaks against their cowardice.
						has_trait = craven
						faith = { trait_is_sin = craven }
					}
				}
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_one_eyed }
	}
	option = { # I took things too far (flagellant)
		name = ATHA_nickname.0108.b_flagellant
		trigger = {
			has_character_flag = put_out_own_eye
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 0.8
				has_trait = humble
			}
			modifier = {
				factor = 0
				has_trait = flagellant
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
			}
		}
		stress_impact = {
			calm = medium_stress_impact_loss
			flagellant = major_stress_impact_gain
			zealous = medium_stress_impact_gain
			cynical = medium_stress_impact_loss
		}
		trait = flagellant

		if = {
			limit = { has_trait = flagellant }
			remove_trait = flagellant
		}

		add_character_modifier = {
			modifier = nickname_regrets_eye_flagellation_modifier
			years = 2
		}
	}
	option = { # Threaten (non-flagellant)
		name = ATHA_nickname.0108.b
		trigger = {
			NOT = { has_character_flag = put_out_own_eye } 
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 1.5
				has_trait = sadistic
			}
			modifier = {
				factor = 1.1
				has_trait = education_intrigue
			}
		}
		stress_impact = {
			wrathful = minor_stress_impact_loss
			vengeful = medium_stress_impact_loss
			sadistic = medium_stress_impact_loss
			brave = medium_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_eye_gouging_threats_modifier
			years = 2
		}
	}
	option = { # Complain (both)
		name = ATHA_nickname.0108.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = { # May realize the effects on their chances with the opposite sex.
				factor = 1.2
				has_trait = lustful
			}
			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = forgiving
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.1
				has_trait = just
			}
		}
		if = {
			limit = { has_character_flag = put_out_own_eye }
			stress_impact = {
				arrogant = medium_stress_impact_loss
				flagellant = major_stress_impact_gain
				zealous = medium_stress_impact_gain
				cynical = medium_stress_impact_loss
			}
		} else = {
			stress_impact = {
				arrogant = medium_stress_impact_loss
				brave = medium_stress_impact_gain
			}
		}

		add_gold = minor_gold_loss
		add_prestige = minor_prestige_loss
		add_piety = minor_piety_loss
	}
}

# nick_the_great
# ATHA_nickname.0109 = {

# nick_the_sacrificed
# Triggered from events.
ATHA_nickname.0110 = {
	type = character_event
	title = ATHA_nickname.0110.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_doctrine_parameter = human_sacrifice_active }
				desc = ATHA_nickname.0110.desc_good
			}
			desc = ATHA_nickname.0110.desc_bad
		}
	}
	theme = death
	left_portrait = root

	immediate = {
		show_as_tooltip = {
			scope:nickname_the_sacrificed_receiver = { 
				set_permanent_nickname_effect = { NICKNAME = nick_the_sacrificed }
			}
		}
	}

	option = { # Accept the nickname.
		name = {
			trigger = { has_doctrine_parameter = human_sacrifice_active }
			text = ATHA_nickname.0110.a_good
		}
		name = {
			trigger = {
				NOT = { has_doctrine_parameter = human_sacrifice_active }
			}
			text = ATHA_nickname.0110.a_good
		}
	}
}

# nick_the_autocrat
# ATHA_nickname.0111 = {

# nick_the_autocrat - Transition from epithet to nickname.
# ATHA_nickname.0112 = {

# nick_the_benefactor
# ATHA_nickname.0113 = {

# nick_the_benefactor - Transition from epithet to nickname.
# ATHA_nickname.0114 = {

# nick_the_besieger
# ATHA_nickname.0115 = {

# nick_the_bold
ATHA_nickname.0116 = {
	type = character_event
	title = ATHA_nickname.0116.t
	desc = ATHA_nickname.0116.desc
	theme = battle
	left_portrait = root

	trigger = {
		can_get_nick_the_bold = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			has_trait = brave
		}
		modifier = {
			factor = 1.2
			has_trait = reckless
		}
		modifier = {
			factor = 1.2
			has_trait = impatient
		}
		modifier = {
			factor = 1.1
			var:nick_the_bold_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_bold_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_bold_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_bold_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_bold_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_bold_weight > 100
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0116.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 2
				has_trait = brave
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.1
				has_trait = aggressive_attacker
			}
			modifier = {
				factor = 1.2
				has_trait = reckless
			}
			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 0.5
				has_trait = humble
			}
			modifier = {
				factor = 0.5
				has_trait = patient
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			arrogant = medium_stress_impact_loss
			reckless = minor_stress_impact_loss
			content = minor_stress_impact_gain
			humble = medium_stress_impact_gain
			patient = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_bold }
		add_prestige = major_prestige_gain
	}
	option = { # I am getting too old for this.
		name = ATHA_nickname.0116.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 2
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = lazy
			}
			modifier = {
				factor = 1.25
				age >= 45
			}
			modifier = {
				factor = 1.5
				age >= 50
			}
			modifier = {
				factor = 2
				age >= 60
			}
			modifier = {
				factor = 3
				age >= 70
			}
		}
		stress_impact = {
			brave = medium_stress_impact_gain
			arrogant = medium_stress_impact_gain
			reckless = minor_stress_impact_gain
			calm = minor_stress_impact_loss
			content = medium_stress_impact_loss
			lazy = medium_stress_impact_loss
		}

		add_prestige = medium_prestige_loss
	}
}

# nick_the_builder
# ATHA_nickname.0117 = {

# nick_the_cruel
# ATHA_nickname.0118 = {

# nick_the_divine
# ATHA_nickname.0119 = {

# nick_the_divine - Transition from epithet to nickname.
# ATHA_nickname.0120 = {

# nick_the_devourer
ATHA_nickname.0121 = {
	type = character_event
	title = ATHA_nickname.0121.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = ATHA_nickname.0121.desc_good
				trigger = {
					faith = { 
						OR = {
							trait_is_virtue = cannibal
							has_doctrine = tenet_ritual_cannibalism
						}
					}
				}
			}
			desc = ATHA_nickname.0121.desc_bad
		}
	}
	theme = battle
	left_portrait = root

	trigger = {
		can_get_nick_the_devourer = yes
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0121.a_good
		trigger = {
			faith = { 
				OR = {
					trait_is_virtue = cannibal
					has_doctrine = tenet_ritual_cannibalism
				}
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = just
			}
			modifier = {
				factor = 1.5
				has_trait = gluttonous
			}
			modifier = {
				factor = 1.5
				has_trait = zealous
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_loss
			just = medium_stress_impact_gain
			gluttonous = medium_stress_impact_loss
			zealous = medium_stress_impact_loss
			compassionate = major_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_devourer }
		add_prestige = medium_piety_gain
	}
	option = { # Accept the nickname
		name = ATHA_nickname.0121.a_bad
		trigger = {
			faith = { 
				NOR = {
					trait_is_virtue = cannibal
					has_doctrine = tenet_ritual_cannibalism
				}
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = greedy
			}
			modifier = {
				factor = 0.5
				has_trait = just 
			}
			modifier = {
				factor = 2
				has_trait = gluttonous
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
				faith = { trait_is_sin = cannibal }
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.5
				has_trait = comfort_eater
			}
		}
		stress_impact = {
			just = major_stress_impact_gain
			gluttonous = major_stress_impact_loss
			zealous = major_stress_impact_gain
			compassionate = major_stress_impact_gain
			comfort_eater = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
	}
	option = { # Is it really right to eat people?
		name = ATHA_nickname.0121.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 0.75
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = generous
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 2
				has_trait = just
			}
			modifier = {
				factor = 2
				has_trait = zealous
				faith = { trait_is_sin = cannibal }
			}
			modifier = {
				factor = 0.5
				has_trait = zealous
				faith = { trait_is_virtue = cannibal }
			}
			modifier = {
				factor = 1.5
				has_trait = compassionate
			}
			modifier = {
				factor = 0.5
				has_trait = sadistic
			}
		}
		stress_impact = {
			base = major_stress_impact_gain
			stubborn = minor_stress_impact_gain
			just = major_stress_impact_loss
			compassionate = medium_stress_impact_loss
		}
		if = {
			limit = {
				has_trait = zealous
				faith = { trait_is_sin = cannibal }
			}
			stress_impact = { zealous = medium_stress_impact_loss }
			add_piety = minor_piety_gain
		} else_if = {
			limit = {
				has_trait = zealous
				faith = { trait_is_virtue = cannibal }
			}
			stress_impact = { zealous = medium_stress_impact_gain }
			add_piety = minor_piety_loss
		}

		remove_trait = cannibal
	}
	option = { # Maybe I should ease up on meat. I am developing a belly...
		name = ATHA_nickname.0121.c
		trigger = {
			OR = {
				NOT = { current_weight < 0 }
				has_trait = lunatic
			}
		}
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 0.75
				has_trait = lazy
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.5
				OR = {
					has_trait = gluttonous
					has_trait = comfort_eater
				}
			}
			modifier = {
				factor = 2
				has_character_modifier = obese_modifier
				OR = {
					has_trait = arrogant
					NOT = { has_trait = gluttonous }
				}
			}
		}
		stress_impact = {
			base = minor_stress_impact_gain
			content = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
			arrogant = medium_stress_impact_loss
			gluttonous = medium_stress_impact_gain
			comfort_eater = medium_stress_impact_gain
		}
		if = {
			limit = { has_trait = comfort_eater }
			remove_trait = comfort_eater
		} else_if = {
			limit = { has_trait = gluttonous }
			remove_trait = gluttonous
		} else_if = {
			limit = { 
				NOT = { has_trait = temperate }
			}
			add_trait = temperate
		} else_if = {
			limit = { has_trait = temperate }
			add_trait = inappetetic
		}

		change_current_weight = -5
	}
}

# nick_the_flautist
# ATHA_nickname.0122 = {
	
# nick_the_fat
ATHA_nickname.0124 = {
	type = character_event
	title = ATHA_nickname.0124.t
	desc = ATHA_nickname.0124.desc
	theme = feast_activity
	left_portrait = root

	trigger = {
		can_get_nick_the_fat = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 1.5
			var:nick_the_fat_weight > 30
		}
		modifier = {
			factor = 1.5
			var:nick_the_fat_weight > 40
		}
		modifier = {
			factor = 1.5
			var:nick_the_fat_weight > 50
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_capital_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0124.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so of course I am a bastard!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			depressed_1 = minor_stress_impact_loss
			depressed_genetic = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_fat }
		add_prestige = medium_prestige_loss
	}
	option = { # Throw them in jail.
		name = ATHA_nickname.0124.b
		custom_tooltip = ATHA_nickname_imprison_suppression_tt
		ai_chance = {
			base = 12

			modifier = {
				factor = 0.9
				has_trait = calm
			}
			modifier = {
				factor = 1.5
				has_trait = vengeful
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
			modifier = {
				factor = 1.1
				has_trait = paranoid
			}
			modifier = {
				factor = 1.1
				has_trait = sadistic
			}
			modifier = {
				factor = 1.2
				has_trait = arbitrary
			}
			modifier = {
				factor = 0.5
				has_trait = just
			}
		}
		stress_impact = {
			vengeful = medium_stress_impact_loss
			compassionate = medium_stress_impact_gain
			just = medium_stress_impact_gain
			arbitrary = minor_stress_impact_loss
		}

		prevent_nickname_by_county_imprison_effect = yes
	}
	option = { # Invite them for dinner!
		name = ATHA_nickname.0124.c
		custom_tooltip = ATHA_nickname_feast_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.2
				OR = {
					has_trait = reveler_1
					has_trait = reveler_2
					has_trait = reveler_3
				}
			}
			modifier = {
				factor = 1.2
				OR = {
					has_trait = gluttonous
					has_trait = comfort_eater
				}
			}
			modifier = {
				factor = 1.1
				has_trait = gregarious
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.8
				has_trait = stubborn
			}
			modifier = {
				factor = 0.1
				has_trait = paranoid
			}
		}
		stress_impact = {
			reveler_1 = minor_stress_impact_loss
			reveler_2 = minor_stress_impact_loss
			reveler_3 = minor_stress_impact_loss
			comfort_eater = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			stubborn = minor_stress_impact_loss
			paranoid = major_stress_impact_gain
		}

		add_prestige = minor_prestige_loss
		add_character_modifier = {
			modifier = nickname_feasting_with_commoners_modifier
			years = 3
		}
	}
}

# nick_the_flayer
# ATHA_nickname.0125 = {

# nick_the_father_loving
# ATHA_nickname.0126 = {

# nick_the_father_loving - Transition from epithet to nickname.
# ATHA_nickname.0127 = {

# nick_the_gardener
# ATHA_nickname.0128 = {

# nick_the_godlike
# ATHA_nickname.0129 = {

# nick_the_good
# ATHA_nickname.0130 = {

# nick_the_hawk
# ATHA_nickname.0131 = {

# nick_the_hunter
# ATHA_nickname.0132 = {

# nick_the_illustrious
# ATHA_nickname.0133 = {

# nick_the_illustrious - Transition from epithet to nickname.
# ATHA_nickname.0134 = {

# nick_the_invincible
ATHA_nickname.0135 = {
	type = character_event
	title = ATHA_nickname.0135.t
	desc = ATHA_nickname.0135.desc 
	theme = battle
	left_portrait = root

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			is_commanding_army = yes
		}
	}

	trigger = {
		can_get_nick_the_invincible = yes
	}

	immediate = { 
		set_nickname_cooldown_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0135.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				has_trait = brave
			}
			modifier = {
				factor = 1.25
				has_trait = ambitious
			}
			modifier = {
				factor = 0.75
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = arrogant
			}
			modifier = {
				factor = 1.25
				has_trait = education_martial
			}
			modifier = {
				factor = 1.25
				has_trait = lifestyle_blademaster
			}
		}
		stress_impact = {
			brave = medium_stress_impact_loss
			content = minor_stress_impact_gain
			arrogant = medium_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_invincible }
		dynasty = { add_dynasty_prestige = medium_dynasty_prestige_gain }
	}
	option = { # Humble rejection.
		name = ATHA_nickname.0135.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.25
				has_trait = shy
			}
			modifier = {
				factor = 1.5
				has_trait = honest
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
		}
		stress_impact = {
			brave = minor_stress_impact_gain
			arrogant = medium_stress_impact_gain
			content = minor_stress_impact_loss
			shy = minor_stress_impact_loss
			paranoid = medium_stress_impact_loss
		}

		add_character_modifier = {
			modifier = nickname_humble_in_victory_modifier
			years = 5
		}
	}
	option = { # Ramp up recruitment.
		name = ATHA_nickname.0135.c
		ai_chance = {
			base = 10
			
			modifier = {
				factor = 2
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = diligent
			}
			modifier = {
				factor = 1.1
				has_trait = wrathful
			}
			modifier = {
				factor = 1.1
				has_trait = vengeful
			}
			modifier = {
				factor = 1.5
				has_trait = education_martial
			}
		}
		stress_impact = {
			ambitious = major_stress_impact_loss
			diligent = minor_stress_impact_loss
			education_martial_1 = minor_stress_impact_loss
			education_martial_2 = minor_stress_impact_loss
			education_martial_3 = minor_stress_impact_loss
			education_martial_4 = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			content = minor_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_impassioned_recruitment_modifier
			years = 5
		}
	}
}

# nick_the_just
ATHA_nickname.0136 = {
	type = character_event
	title = ATHA_nickname.0136.t
	desc = ATHA_nickname.0136.desc
	theme = battle
	left_portrait = root

	trigger = {
		can_get_nick_the_just = yes
		NOT = { has_nickname = epithet_the_just }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0136.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = calm
			}
			modifier = {
				factor = 1.1
				has_trait = forgiving
			}
			modifier = {
				factor = 1.1
				has_trait = arrogant
			}
			modifier = {
				factor = 1.5
				has_bad_nickname = yes
			}
			modifier = {
				factor = 1.25
				has_trait = just
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
				faith = { trait_is_virtue = just }
			}
		}
		stress_impact = {
			just = minor_stress_impact_loss
			arbitrary = medium_stress_impact_gain
			humble = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_just }
		add_prestige = medium_prestige_gain
	}
	option = { # Humble rejection.
		name = ATHA_nickname.0136.b
		trait = humble
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = {
				factor = 1.5
				has_trait = just
			}
		}
		stress_impact = {
			humble = medium_stress_impact_loss
			just = medium_stress_impact_loss
			arbitrary = medium_stress_impact_gain
		}

		add_piety = medium_piety_gain
	}
	option = { # Arbitary approach.
		name = ATHA_nickname.0136.c
		trait = arbitrary
		ai_chance = {
			base = 10
			
			modifier = {
				factor = 1.25
				has_trait = vengeful
			}
			modifier = {
				factor = 1.1
				has_trait = fickle
			}
			modifier = {
				factor = 1.5
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.25
				has_trait = zealous
				faith = { trait_is_virtue = arbitary }
			}
			modifier = {
				factor = 0.75
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = sadistic
			}
			modifier = {
				factor = 1.1
				has_trait = callous
			}
		}
		stress_impact = {
			vengeful = minor_stress_impact_loss
			arbitrary = medium_stress_impact_loss
			compassionate = minor_stress_impact_gain
			just = medium_stress_impact_gain
			sadistic = minor_stress_impact_loss
		}

		if = {
			limit = { has_trait = just }

			remove_trait = just
		} else_if = {
			limit = {
				NOT = { has_trait = arbitrary }
			}

			random = {
				chance = 10
				add_trait = arbitrary
			}
		}
	}
}

# nick_the_just - Transition from epithet to nickname.
ATHA_nickname.0137 = {
	hidden = yes

	trigger = {
		can_get_nick_the_just = yes
		has_nickname = epithet_the_just
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_just }
	}
}

# nick_the_lame
# ATHA_nickname.0138 = {

# nick_the_mad
ATHA_nickname.0139 = {
	type = character_event
	title = ATHA_nickname.0139.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = { has_trait = lunatic }
				desc = ATHA_nickname.0139.desc_lunatic
			}
			desc = ATHA_nickname.0139.desc_normal
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					has_trait = lunatic
					uses_greek_for_nickname_localization_trigger = yes
					OR = {
						has_nickname = epithet_the_illustrous
						has_nickname = nick_the_illustrious
					}
				}
				desc = ATHA_nickname.0139.desc_lunatic_epithet_after
			}
			triggered_desc = {
				trigger = {
					uses_greek_for_nickname_localization_trigger = yes
					OR = {
						has_nickname = epithet_the_illustrous
						has_nickname = nick_the_illustrious
					}
				}
				desc = ATHA_nickname.0139.desc_normal_epithet_after
			}
			triggered_desc = {
				trigger = { has_trait = lunatic }
				desc = ATHA_nickname.0139.desc_lunatic_after
			}
			desc = ATHA_nickname.0139.desc_normal_after
		}
	}
	theme = realm
	left_portrait = root

	trigger = {
		can_get_nick_the_mad = yes
	}

	immediate = {
		select_nickname_councillor_effect = yes
		select_nickname_ancestor_effect = yes

		set_nickname_cooldown_effect = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = lunatic
		}
		modifier = { # In Greek, this is a play upon Epiphanes
			factor = 2
			uses_greek_for_nickname_localization_trigger = yes
			OR = {
				has_nickname = epithet_the_illustrous
				has_nickname = nick_the_illustrious
			}
		}

		modifier = {
			factor = 1.1
			var:nick_the_mad_weight > 30
		}
		modifier = {
			factor = 1.2
			var:nick_the_mad_weight > 40
		}
		modifier = {
			factor = 1.3
			var:nick_the_mad_weight > 50
		}
		modifier = {
			factor = 1.4
			var:nick_the_mad_weight > 60
		}
		modifier = {
			factor = 1.5
			var:nick_the_mad_weight > 70
		}
		modifier = {
			factor = 2
			var:nick_the_mad_weight > 100
		}
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0139.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 10
				has_trait = lunatic
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
			modifier = {
				factor = 1.25
				has_trait = fickle
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = ambitious
			}
		}
		stress_impact = {
			lunatic_1 = major_stress_impact_loss
			lunatic_genetic = major_stress_impact_loss
			paranoid = medium_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_mad }
		add_prestige = major_prestige_loss
	}
	option = { # Roll back some of my reforms.
		name = ATHA_nickname.0139.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = lunatic
			}
			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 0.5
				has_trait = ambitious
			}
			modifier = {
				factor = 1.5
				has_trait = fickle
			}
			modifier = {
				factor = 0.75
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = just
			}
			modifier = {
				factor = 0.75
				has_trait = arbitrary
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
			modifier = {
				factor = 0.9
				has_trait = impatient
			}
		}
		stress_impact = {
			lunatic_1 = minor_stress_impact_gain
			lunatic_genetic = minor_stress_impact_gain
			calm = minor_stress_impact_loss
			ambitious = medium_stress_impact_gain
			fickle = medium_stress_impact_loss
			stubborn = minor_stress_impact_gain
			arbitrary = minor_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_cancel_lunatic_reforms_modifier
			years = 5
		}
	}
	option = { # Retreat from public life.
		name = ATHA_nickname.0139.c
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.9
				has_trait = brave
			}
			modifier = {
				factor = 1.25
				has_trait = wrathful
			}
			modifier = {
				factor = 0.75
				has_trait = ambitious
			}
			modifier = {
				factor = 1.25
				has_trait = lazy
			}
			modifier = {
				factor = 0.5
				has_trait = gregarious
			}
			modifier = {
				factor = 2
				has_trait = shy
			}
			modifier = {
				factor = 0.75
				has_trait = patient
			}
			modifier = {
				factor = 1.5
				has_trait = paranoid
			}
			modifier = {
				factor = 0.5
				has_trait = reveler
			}
		}
		stress_impact = {
			base = minor_stress_impact_gain
			wrathful = minor_stress_impact_loss
			ambitious = minor_stress_impact_gain
			lazy = minor_stress_impact_loss
			gregarious = medium_stress_impact_gain
			shy = major_stress_impact_loss
			patient = minor_stress_impact_gain
			paranoid = medium_stress_impact_loss
			reveler_1 = medium_stress_impact_gain
			reveler_2 = medium_stress_impact_gain
			reveler_3 = medium_stress_impact_gain
		}

		add_prestige = medium_prestige_loss
		add_character_modifier = {
			modifier = nickname_retreat_from_public_life_modifier
			years = 3
		}
	}
}

# nick_the_mother_loving
# ATHA_nickname.0140 = {

# nick_the_mother_loving - Transition from epithet to nickname.
# ATHA_nickname.0141 = {

# nick_the_mindbreaker
# ATHA_nickname.0142 = {

# nick_the_overpromiser
# ATHA_nickname.0143 = {

# nick_the_pious
# ATHA_nickname.0144 = {

# nick_the_pious - Transition from epithet to nickname.
# ATHA_nickname.0145 = {

# nick_the_poet - Bad
ATHA_nickname.0146 = { 
	type = character_event
	title = ATHA_nickname.0146.t
	desc = ATHA_nickname.0146.desc
	theme = feast_activity
	left_portrait = root
	right_portrait = scope:nickname_councillor

	trigger = {
		can_get_nick_the_poet_bad = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = poet
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_nickname_councillor_effect = yes
		select_independent_ruler_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0146.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = humble
			}
			modifier = {
				factor = 0.9
				has_trait = ambitious
			}
			modifier = {
				factor = 0.9
				has_trait = stubborn
			}
			modifier = {
				factor = 1.1
				has_trait = honest
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = { # I am a terrible human being, so of course I should be known for my bad poetry!
				factor = 1.2
				OR = {
					has_trait = depressed_1
					has_trait = depressed_genetic
				}
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_gain
			ambitious = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
			depressed_1 = minor_stress_impact_loss
			depressed_genetic = minor_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_poet }
		add_prestige = medium_prestige_loss
	}
	option = { # Quit poetry.
		name = ATHA_nickname.0146.b
		custom_tooltip = ATHA_nickname_abandon_poetry_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 0.75
				has_trait = calm
			}
			modifier = {
				factor = 2
				has_trait = lazy
			}
			modifier = {
				factor = 1.5
				has_trait = impatient
			}
			modifier = {
				factor = 0.5
				has_trait = patient
			}
			modifier = {
				factor = 1.5
				has_trait = wrathful
			}
			modifier = {
				factor = 0.75
				has_trait = poet
			}
		}
		stress_impact = {
			calm = minor_stress_impact_gain
			lazy = medium_stress_impact_gain
			impatient = minor_stress_impact_loss
			wrathful = minor_stress_impact_loss
			patient = medium_stress_impact_gain
		}

		if = {
			limit = { has_trait = poet }

			remove_trait = poet
			add_stress = major_stress_impact_gain
		} else = {
			add_stress = medium_stress_impact_gain
		}

		change_nickname_weight_effect = { NICKNAME = nick_the_poet_bad AMOUNT = nickname_weight_large_decrease }
		change_nickname_weight_effect = { NICKNAME = nick_the_poet_good AMOUNT = nickname_weight_large_decrease }
	}
	option = { # Invite the actors to your court.
		name = ATHA_nickname.0146.c
		custom_tooltip = ATHA_nickname_invite_play_peaceful_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.5
				OR = {
					has_trait = reveler_1
					has_trait = reveler_2
					has_trait = reveler_3
				}
			}
			modifier = {
				factor = 1.25
				has_trait = gregarious
			}
			modifier = {
				factor = 1.25
				has_trait = compassionate
			}
			modifier = {
				factor = 0.5
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = stubborn
			}
			modifier = {
				factor = 0.75
				has_trait = paranoid
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
			modifier = {
				factor = 0
				has_trait = vengeful
			}
		}
		stress_impact = {
			reveler_1 = medium_stress_impact_loss
			reveler_2 = medium_stress_impact_loss
			reveler_3 = medium_stress_impact_loss
			compassionate = minor_stress_impact_loss
			arrogant = medium_stress_impact_gain
			stubborn = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
			greedy = medium_stress_impact_gain
			vengeful = major_stress_impact_gain
		}

		add_gold = minor_gold_loss
		add_character_modifier = {
			modifier = nickname_can_take_a_joke_modifier
			years = 2
		}
	}
	option = { # Invite the actors to your court to make them dissapear.
		name = ATHA_nickname.0146.d
		custom_tooltip = ATHA_nickname_invite_play_sadistic_tt
		ai_chance = {
			base = 15

			modifier = {
				factor = 2
				has_trait = wrathful
			}
			modifier = {
				factor = 2
				has_trait = vengeful
			}
			modifier = {
				factor = 0.75
				has_trait = gregarious
			}
			modifier = {
				factor = 0.5
				has_trait = greedy
			}
		}
		stress_impact = {
			sadistic = minor_stress_impact_loss
			wrathful = minor_stress_impact_loss
			vengeful = medium_stress_impact_loss
			gregarious = minor_stress_impact_gain
			greedy = medium_stress_impact_gain
		}

		add_gold = minor_gold_loss
		add_dread = 5
		add_character_modifier = {
			modifier = nickname_mysterious_dissapearance_modifier
			years = 5
		}
	}
}

# nick_the_poet - Good
ATHA_nickname.0147 = { 
	type = character_event
	title = ATHA_nickname.0147.t
	desc = ATHA_nickname.0147.desc
	theme = feast_activity
	left_portrait = root

	trigger = {
		can_get_nick_the_poet_good = yes
	}

	weight_multiplier = {
		base = 1

		modifier = {
			factor = 2
			has_trait = poet
		}
	}

	immediate = {
		set_nickname_cooldown_effect = yes

		select_two_independent_rulers_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0147.a
		ai_chance = {
			base = 10

			modifier = { # Likes being the center of attention.
				factor = 1.5
				has_trait = arrogant
			}
			modifier = { # Hates being the center of attention.
				factor = 0.5
				has_trait = shy
			}
			modifier = {
				factor = 2
				has_trait = poet
			}
			modifier = { # The world should be exposed to my poetry without price.
				factor = 1.5
				has_trait = generous
			}
		}
		stress_impact = {
			arrogant = medium_stress_impact_loss
			shy = medium_stress_impact_gain
			poet = major_stress_impact_loss
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_poet }
		dynasty = { add_dynasty_prestige = medium_dynasty_prestige_gain }
	}
	option = { # Sell poetry for gold.
		name = ATHA_nickname.0147.b
		custom_tooltip = ATHA_nickname_sell_poems_tt
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.1
				has_trait = ambitious
			}
			modifier = {
				factor = 2
				has_trait = greedy
			}
			modifier = {
				factor = 1.25
				has_trait = impatient
			}
			modifier = {
				factor = 0.5
				has_trait = generous
			}
		}
		stress_impact = {
			greedy = major_stress_impact_loss
			impatient = minor_stress_impact_loss
			generous = medium_stress_impact_gain
		}

		add_gold = medium_gold_value
		add_character_modifier = {
			modifier = nickname_selling_poems_modifier
			years = 5
		}
	}
	option = { # Use poetry to pursue political goals.
		name = ATHA_nickname.0147.c
		custom_tooltip = ATHA_nickname_political_poems_tt
		ai_chance = {
			base = 10
			
			modifier = {
				factor = 2
				has_trait = ambitious
			}
			modifier = {
				factor = 1.5
				has_trait = diligent
			}
			modifier = {
				factor = 1.25
				has_trait = greedy
			}
			modifier = {
				factor = 0.5
				has_trait = humble
			}
			modifier = {
				factor = 1.25
				has_trait = impatient
			}
			modifier = {
				factor = 0.5
				has_trait = compassionate
			}
		}
		stress_impact = {
			ambitious = major_stress_impact_loss
			diligent = medium_stress_impact_loss
			humble = medium_stress_impact_gain
			compassionate = medium_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_political_poems_modifier
			years = 5
		}
	}
}

# nick_the_saviour
# ATHA_nickname.0148 = {

# nick_the_saviour - Transition from epithet to nickname.
# ATHA_nickname.0149 = {

# nick_the_scholar
# ATHA_nickname.0150 = {

# nick_the_sibling_loving
# ATHA_nickname.0151 = {

# nick_the_sibling_loving - Transition from epithet to nickname.
# ATHA_nickname.0152 = {

# nick_the_small
# ATHA_nickname.0153 = {

# nick_the_smelly
# ATHA_nickname.0154 = {

# nick_the_thin
# ATHA_nickname.0155 = {

# nick_the_ugly
# ATHA_nickname.0156 = {

# nick_the_untimely
# ATHA_nickname.0157 = {

# nick_the_victor
# ATHA_nickname.0158 = {

# nick_the_victor - Transition from epithet to nickname.
# ATHA_nickname.0159 = {

# nick_the_victorious
ATHA_nickname.0160 = {
	type = character_event
	title = ATHA_nickname.0160.t
	desc = ATHA_nickname.0160.desc
	theme = battle
	left_portrait = root

	trigger = {
		can_get_nick_the_victorious = yes
		NOT = { has_nickname = epithet_the_victorious }
	}

	immediate = {
		set_nickname_cooldown_effect = yes
	}

	option = { # Accept the nickname.
		name = ATHA_nickname.0160.a
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = brave
			}
			modifier = {
				factor = 0.9
				has_trait = content
			}
			modifier = {
				factor = 1.1
				has_trait = diligent
			}
			modifier = {
				factor = 1.25
				has_trait = honest
			}
			modifier = {
				factor = 1.25
				has_trait = arrogant
			}
			modifier = {
				factor = 0.75
				has_trait = compassionate
			}
			modifier = {
				factor = 1.25
				has_trait = education_martial
			}
		}
		stress_impact = {
			brave = minor_stress_impact_loss
			honest = minor_stress_impact_loss
			arrogant = minor_stress_impact_loss
			compassionate = minor_stress_impact_gain
			education_martial_1 = minor_stress_impact_loss
			education_martial_2 = minor_stress_impact_loss
			education_martial_3 = minor_stress_impact_loss
			education_martial_4 = minor_stress_impact_loss
			content = minor_stress_impact_gain
			humble = medium_stress_impact_gain
		}

		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_victorious }
		add_prestige = medium_prestige_gain
	}
	option = { # Humbly refuse.
		name = ATHA_nickname.0160.b
		ai_chance = {
			base = 10

			modifier = {
				factor = 1.25
				has_trait = calm
			}
			modifier = {
				factor = 1.25
				has_trait = content
			}
			modifier = {
				factor = 1.5
				has_trait = humble
			}
			modifier = {
				factor = 1.1
				has_trait = patient
			}
		}
		stress_impact = {
			calm = minor_stress_impact_loss
			content = minor_stress_impact_loss
			humble = medium_stress_impact_loss
			brave = minor_stress_impact_gain
			arrogant = medium_stress_impact_gain
			education_martial_1 = minor_stress_impact_gain
			education_martial_2 = minor_stress_impact_gain
			education_martial_3 = minor_stress_impact_gain
			education_martial_4 = minor_stress_impact_gain
		}

		add_character_modifier = {
			modifier = nickname_humble_in_victory_modifier
			years = 5
		}
		add_prestige = medium_prestige_gain

		if = {
			limit = { has_trait = arrogant }
			add_trait = arrogant
		} else_if = {
			limit = {
				NOT = { has_trait = humble }
			}

			random = {
				chance = 10
				add_trait = humble
			}
		}
	}
}

# nick_the_victorious - Transition from epithet to nickname.
ATHA_nickname.0161 = {
	hidden = yes

	trigger = {
		can_get_nick_the_victorious = yes
		has_nickname = epithet_the_victorious
	}

	immediate = {
		set_nickname_with_cooldown_effect = { NICKNAME = nick_the_victorious }
	}
}

# nick_the_wealthy
# ATHA_nickname.0162 = {

# nick_the_wealthy - Transition from epithet to nickname.
# ATHA_nickname.0163 = {

# nick_the_well_born
# ATHA_nickname.0164 = {

# nick_the_well_born - Transition from epithet to nickname.
# ATHA_nickname.0165 = {

# nick_the_wise
# ATHA_nickname.0166 = {

# Add 1 battle win to the battle counter.
ATHA_nickname.0300 = {
	scope = combat_side
	hidden = yes

	immediate = {
		side_commander = { register_battle_win = yes }
	}
}

# Add 1 battle loss to the battle counter.
ATHA_nickname.0301 = {
	scope = combat_side
	hidden = yes

	immediate = {
		side_commander = { register_battle_loss = yes }
	}
}

# Intermediate event for nick_the_eagle.
ATHA_nickname.0302 = {
	scope = combat_side
	hidden = yes

	trigger = {
		side_primary_participant = {
			can_get_nickname_trigger = yes
			can_get_nick_the_eagle = yes
		}

		exists = scope:wipe # The battle was a stackwipe.
	}

	immediate = {
		combat.location = { save_scope_as = combat_location }

		side_primary_participant = {
			trigger_event = { id = ATHA_nickname.0103 }
		}
	}
}