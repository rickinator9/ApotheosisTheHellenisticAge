# Does this character use greek localization for nicknames?
uses_greek_for_nickname_localization_trigger = {
	always = yes # We currently only have cultures that use Greek for nicknames.
}

# Is this character allowed to get an epithet?
is_allowed_epithet_trigger = {
	is_independent_ruler = yes
	OR = {
		has_government = feudal_government
		has_government = clan_government
		has_government = tribal_government
		has_government = city_state_tyrannical_government
	}
}

# Can this character get an epithet right now?
can_get_epithet_trigger = {
	is_allowed_epithet_trigger = yes
	NOR = {
		has_any_nickname = yes
		has_character_flag = refused_epithet
	}
}

# Does this character have an epithet?
has_epithet_trigger = {
	OR = {
		has_nickname = epithet_the_asian
		has_nickname = epithet_the_autocrat
		has_nickname = epithet_the_victorious
		has_nickname = epithet_the_beautifully_triumphant
		has_nickname = epithet_the_benefactor
		has_nickname = epithet_the_divine
		has_nickname = epithet_the_divine_manifest
		has_nickname = epithet_the_father_loving
		has_nickname = epithet_the_generous
		has_nickname = epithet_the_illustrous
		has_nickname = epithet_the_just
		has_nickname = epithet_the_mother_loving
		has_nickname = epithet_the_pious
		has_nickname = epithet_the_saviour
		has_nickname = epithet_the_sibling_loving
		has_nickname = epithet_the_victor
		has_nickname = epithet_the_wealthy
		has_nickname = epithet_the_well_born
	}
}

# Is this character allowed to get a nickname?
is_allowed_nickname_trigger = {
	is_independent_ruler = yes
	OR = {
		has_government = feudal_government
		has_government = clan_government
		has_government = tribal_government
		has_government = city_state_tyrannical_government
	}
}

# Can this character get a nickname right now?
can_get_nickname_trigger = {
	is_allowed_nickname_trigger = yes
	NOT = { has_character_flag = nickname_cooldown }
	OR = {
		NOT = { has_nickname_trigger = yes }
		has_incorrect_nickname = yes
	}
}

# Does this character have a nickname that does not apply anymore?
has_incorrect_nickname = {
	NOT = { has_character_flag = has_permanent_nickname }
	OR = {
		AND = {
			has_nickname = nick_the_bastard
			NOT = { can_get_nick_the_bastard = yes }
		}
		AND = {
			has_nickname = nick_the_bold
			NOT = { can_get_nick_the_bold = yes }
		}
		AND = {
			has_nickname = nick_the_clubfooted
			NOT = { can_get_nick_the_clubfooted = yes }
		}
		AND = {
			has_nickname = nick_the_devourer
			NOT = { can_get_nick_the_devourer = yes }
		}
		# nick_the_eagle can never be replaced.
		AND = {
			has_nickname = nick_the_fair
			NOT = { can_get_nick_the_fair = yes }
		}
		AND = {
			has_nickname = nick_the_fat
			NOT = { can_get_nick_the_fat = yes }
		}
		AND = {
			has_nickname = nick_the_invincible
			NOT = { can_get_nick_the_invincible = yes }
		}
		AND = {
			has_nickname = nick_the_mad
			NOT = { can_get_nick_the_mad = yes }
		}
		AND = {
			has_nickname = nick_the_one_eyed
			NOT = { can_get_nick_the_one_eyed = yes }
		}
		AND = {
			has_nickname = nick_the_poet
			NOR = {
				can_get_nick_the_poet_good = yes
				can_get_nick_the_poet_bad = yes
			}
		}
		AND = {
			has_nickname = nick_the_victorious
			net_battle_wins <= 0
		}
		AND = {
			has_nickname = nick_the_young
			NOT = { can_get_nick_the_young = yes }
		}
	}
} # TODO

# Does this character have a nickname that is not an epithet?
has_nickname_trigger = {
	has_any_nickname = yes
	NOT = { has_epithet_trigger = yes }
}

######### NICKNAME-SPECIFIC TRIGGERS ########

can_get_nick_the_bastard = {
	OR = {
		has_trait = bastard
		has_trait = legitimized_bastard
		has_trait = disputed_heritage
	}
}

can_get_nick_the_bold = {
	NOT = { has_trait = craven }
	trigger_if = {
		limit = { has_variable = nick_the_bold_weight }
		var:nick_the_bold_weight >= 30
	}
}

can_get_nick_the_clubfooted = {
	has_trait = clubfooted
}

can_get_nick_the_devourer = {
	has_trait = cannibal
}

can_get_nick_the_eagle = {
	always = yes
}

can_get_nick_the_fair = {
	is_attractive_character_trigger = yes
}

can_get_nick_the_fat = {
	trigger_if = {
		limit = { has_variable = nick_the_fat_weight }
		OR = {
			AND = {
				has_character_modifier = obese_modifier
				var:nick_the_fat_weight >= 10
			}
			var:nick_the_fat_weight >= 30
		}
	}
}

can_get_nick_the_invincible = {
	net_battle_wins >= 10
	OR = {
		NOT = { has_variable = battle_losses }
		trigger_if = {
			limit = { has_variable = battle_losses }
			var:battle_losses = 0
		}
	}
}

can_get_nick_the_mad = {
	trigger_if = {
		limit = { has_variable = nick_the_mad_weight }
		var:nick_the_mad_weight >= 30
	}
}

can_get_nick_the_one_eyed = {
	has_trait = one_eyed
}

can_get_nick_the_poet_bad = {
	trigger_if = {
		limit = { has_variable = nick_the_poet_bad_weight }
		var:nick_the_poet_bad_weight >= 10
		OR = {
			NOT = { has_variable = nick_the_poet_good_weight }
			trigger_if = {
				limit = { has_variable = nick_the_poet_good_weight }
				var:nick_the_poet_bad_weight > var:nick_the_poet_good_weight
			}
		}
	}
}

can_get_nick_the_poet_good = {
	trigger_if = {
		limit = { has_variable = nick_the_poet_good_weight }
		var:nick_the_poet_good_weight >= 10
		OR = {
			NOT = { has_variable = nick_the_poet_bad_weight }
			trigger_if = {
				limit = { has_variable = nick_the_poet_bad_weight }
				var:nick_the_poet_good_weight > var:nick_the_poet_bad_weight
			}
		}
	}
}

can_get_nick_the_sacrificed = {
	NOT = { can_get_nickname_trigger = yes }
}

can_get_nick_the_victorious = {
	net_battle_wins >= 10
	NOT = { can_get_nick_the_invincible = yes }
}

can_get_nick_the_young = {
	NOT = { is_adult = yes }
}